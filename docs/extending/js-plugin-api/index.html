<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.68">
<link rel="search" type="application/opensearchdescription+xml" title="Flipper" href="/opensearch.xml">
<script src="https://buttons.github.io/buttons.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
<script src="/js/code-blocks-buttons.js"></script>
<script src="/js/google-analytics.js"></script><title data-react-helmet="true">Desktop Plugin API | Flipper</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Desktop Plugin API | Flipper"><meta data-react-helmet="true" name="description" content="The APIs shown here are deprecated. The APIs exposed from flipper-plugin should be preferred instead."><meta data-react-helmet="true" property="og:description" content="The APIs shown here are deprecated. The APIs exposed from flipper-plugin should be preferred instead."><meta data-react-helmet="true" property="og:url" content="https://fbflipper.com//docs/extending/js-plugin-api"><link data-react-helmet="true" rel="shortcut icon" href="/img/icon.png"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link data-react-helmet="true" rel="canonical" href="https://fbflipper.com//docs/extending/js-plugin-api"><link rel="stylesheet" href="/styles.ede05923.css">
<link rel="preload" href="/styles.82c4951a.js" as="script">
<link rel="preload" href="/runtime~main.afee353c.js" as="script">
<link rel="preload" href="/main.ee5c6263.js" as="script">
<link rel="preload" href="/1.744db94b.js" as="script">
<link rel="preload" href="/70.ba3130a7.js" as="script">
<link rel="preload" href="/73.def975d9.js" as="script">
<link rel="preload" href="/935f2afb.7d2a613d.js" as="script">
<link rel="preload" href="/69.7041db55.js" as="script">
<link rel="preload" href="/ec8f03f2.5d3ccba7.js" as="script">
</head>
<body>
<div style="display: none; text-align: center; background-color: white; color: black;" id="internaldocs-banner"></div>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_2AhQ">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img src="/img/icon.png" alt="Flipper Logo" class="themedImage_2E_h themedImage--light_AouX navbar__logo"><img alt="Flipper Logo" class="themedImage_2E_h themedImage--dark_1YPN navbar__logo"><strong class="navbar__title">Flipper</strong></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/features/index">Features</a><a class="navbar__item navbar__link" href="/docs/getting-started/index">Setup</a><a class="navbar__item navbar__link" href="/docs/tutorial/intro">Creating Plugins</a><a href="https://github.com/facebook/flipper" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><a class="navbar__item navbar__link" href="/docs/internals/index">Under the Hood</a><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span><span class="DocSearch-Button-Key">⌘</span><span class="DocSearch-Button-Key">K</span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/icon.png" alt="Flipper Logo" class="themedImage_2E_h themedImage--light_AouX navbar__logo"><img alt="Flipper Logo" class="themedImage_2E_h themedImage--dark_1YPN navbar__logo"><strong class="navbar__title">Flipper</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/features/index">Features</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/getting-started/index">Setup</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/tutorial/intro">Creating Plugins</a></li><li class="menu__list-item"><a href="https://github.com/facebook/flipper" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/internals/index">Under the Hood</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive thin-scrollbar menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Tutorial</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tutorial/intro">Intro</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tutorial/ios">Building an iOS Plugin</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tutorial/android">Building an Android Plugin</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tutorial/react-native">Building a React Native Plugin</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tutorial/js-setup">Building a Desktop Plugin</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tutorial/js-table">Showing a table</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tutorial/js-custom">Custom Plugin</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tutorial/js-publishing">Publishing</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Development workflow</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/extending/dev-setup">Development Setup</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/extending/loading-custom-plugins">Dynamically Loading Plugins</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/extending/desktop-plugin-structure">Plugin structure</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/extending/testing">Testing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/extending/debugging">Debugging</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/extending/plugin-distribution">Plugin Distribution</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Desktop plugin APIs</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/extending/flipper-plugin">Desktop Plugin API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/extending/styling-components">Styling Components</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/extending/create-table-plugin">Create Table Plugin</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/extending/search-and-filter">Searching and Filtering</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Deprecated APIs</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/extending/ui-components">UI Components</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/extending/js-plugin-api">Desktop Plugin API</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Client plugin APIs</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/extending/create-plugin">Client Plugin API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/extending/error-handling">Error Handling</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/extending/arch">Architecture</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/extending/client-plugin-lifecycle">Client Plugin Lifecycle</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/extending/layout-inspector">Extending Layout Inspector</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_39qw"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Desktop Plugin API</h1></header><div class="markdown"><div class="warning">The APIs shown here are deprecated. The APIs exposed from [`flipper-plugin`](/docs/extending/flipper-plugin) should be preferred instead.</div><div class="warning"><p>This page describes the JavaScript API that is used to implement plugins inside the Flipper Desktop application. For the JavaScript API that can be used inside React Native to communicate with the Flipper Desktop, see <a href="/docs/extending/create-plugin">Client Plugin API</a>.</p></div><p>Provided a plugin is setup as defined in <a href="/docs/extending/desktop-plugin-structure">Desktop Plugin Development</a>, the basic requirement of a Flipper plugin is that <code>index.tsx</code> exports a default class that extends <code>FlipperPlugin</code>.</p><p><code>FlipperPlugin</code> is an extension of <code>React.Component</code> with extra Flipper-related functionality. This means to define the UI of your plugin, you just need to implement this React component.</p><p>Below is a reference of the APIs available to the <code>FlipperPlugin</code> class.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="init"></a>init()<a aria-hidden="true" class="hash-link" href="#init" title="Direct link to heading">#</a></h2><p><code>FlipperPlugin</code> has an <code>init()</code> method which can be overridden by plugins. Use this to make any initial calls to the client, and set up subscriptions. Only after <code>init()</code> is called will the <code>client</code> object be set.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="client"></a>Client<a aria-hidden="true" class="hash-link" href="#client" title="Direct link to heading">#</a></h2><p>This object is provided for communicating with the client plugin, and is accessible using <code>this.client</code> inside <code>FlipperPlugin</code> after <code>init()</code> has been called. Methods called on it will be routed to the client plugin with the same identifier as the JS plugin.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="call"></a>call<a aria-hidden="true" class="hash-link" href="#call" title="Direct link to heading">#</a></h3><p><code>client.call(method: string, params: Object): Promise&lt;Object&gt;</code></p><p>Call a method on your client plugin implementation. Call <code>.catch()</code> on the returned promise to handle any errors returned from the client.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="subscribe"></a>subscribe<a aria-hidden="true" class="hash-link" href="#subscribe" title="Direct link to heading">#</a></h3><p><code>client.subscribe(method: string, callback: (Object =&gt; void)): void</code></p><p>Subscribe to messages sent proactively from the client plugin.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="supportsmethod"></a>supportsMethod<a aria-hidden="true" class="hash-link" href="#supportsmethod" title="Direct link to heading">#</a></h3><p><code>client.supportsMethod(method: string): Promise&lt;Boolean&gt;</code></p><p>Resolves to true if the client supports the specified method. Useful when adding functionality to existing plugins, when connectivity to older clients is still required. Also useful when client plugins are implemented on multitple platforms and don&#x27;t all have feature parity.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="send-deprecated"></a>send (DEPRECATED)<a aria-hidden="true" class="hash-link" href="#send-deprecated" title="Direct link to heading">#</a></h3><p><code>client.send(method, params): void</code></p><p>Use call instead which allows error handling and tracking.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="props"></a>Props<a aria-hidden="true" class="hash-link" href="#props" title="Direct link to heading">#</a></h2><p>Since <code>FlipperClient</code> inherits from <code>React.Component</code> we&#x27;ve defined some props that are provided. The main ones are explained below. Consult the code for the full set.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="persistedstate"></a>persistedState<a aria-hidden="true" class="hash-link" href="#persistedstate" title="Direct link to heading">#</a></h3><p>As well as React state, a FlipperPlugin also has persisted state. This state is retained even when the plugin is not active, for example when the user is using a different plugin, or when a client is temporarily disconnected, however it is not persisted across restarts of Flipper (by default).</p><p>Like React state, it should <strong>never</strong> be modified directly. Instead, you should use the <code>setPersistedState</code> prop.</p><p>If using persisted state, make sure to set a <strong>static</strong> <code>defaultPersistedState</code> in your class, so that the state is correctly initialized.</p><p><code>static defaultPersistedState = {myValue: 55};</code></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="setpersistedstate"></a>setPersistedState<a aria-hidden="true" class="hash-link" href="#setpersistedstate" title="Direct link to heading">#</a></h3><p>A callback for updating persisted state. Similar to React&#x27;s <code>setState</code>, you can pass either a complete PersistedState or a partial one that will be merged with the current persisted state.</p><p>Persisted state can also be modified when a plugin is not active. See <a href="#background-plugins">Background Plugins</a> for details.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="selectplugin"></a>selectPlugin<a aria-hidden="true" class="hash-link" href="#selectplugin" title="Direct link to heading">#</a></h3><p>A callback for deep-linking to another plugin. When called, Flipper will switch from the current active plugin to the one specified and include a payload to provide context for the receiving plugin.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="deeplinkpayload"></a>deepLinkPayload<a aria-hidden="true" class="hash-link" href="#deeplinkpayload" title="Direct link to heading">#</a></h3><p>When a plugin is activated through a deep-link, this prop will contain the payload, allowing the plugin to highlight some particular data, or perform an action for example. A good time to check for the deepLinkPayload is in the <code>componentDidMount</code> React callback.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="isarchiveddevice"></a>isArchivedDevice<a aria-hidden="true" class="hash-link" href="#isarchiveddevice" title="Direct link to heading">#</a></h3><p>Informs the plugin whether or not the client is archived, and therefore not currently connected.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="background-plugins"></a>Background Plugins<a aria-hidden="true" class="hash-link" href="#background-plugins" title="Direct link to heading">#</a></h2><p>Sometimes it&#x27;s desirable for a plugin to be able to process incoming messages from the client even when inactive.</p><p>To do this, define a static <code>persistedStateReducer</code> function in the plugin class:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-typescript codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">static</span><span class="token plain"> persistedStateReducer</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token maybe-class-name">PersistedState</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    persistedState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token maybe-class-name">PersistedState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    method</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token known-class-name class-name" style="color:rgb(255, 203, 107)">Object</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token maybe-class-name">PersistedState</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>The job of the <code>persistedStateReducer</code> is to merge incoming data into the state, so that next time the plugin is activated, the persisted state will be ready.
If a plugin has a <code>persistedStateReducer</code>, and the plugin is not open in flipper, incoming messages are queued until the plugin is opened.</p><p>The number of events that are cached for a plugin is controlled by the optional static field <code>maxQueueSize</code>, which defaults to <code>10000</code> events.</p><div class="warning"><p>Note that if a plugin is not starred by the user, it will not receive any messages when it is not selected by the user. Even when it has a <code>persistedStateReducer</code>. This prevents plugins that are not actively used by the user from wasting a lot of CPU / memory.</p></div><p>The data that is produced from <code>persistedStateReducer</code> should be immutable, but also structurally sharing unchanged parts of the state with the previous state to avoid performance hiccups. To simplify this process we recommend using the <a href="https://immerjs.github.io/immer/docs/introduction" target="_blank" rel="noopener noreferrer">Immer</a> package.
Immer makes it possible to keep the reducer concise by directly supporting &quot;writing&quot; to the current state, and keeping track of that in the background.
Also it will guarantee that there are no accidental data manipulations by freezing the produced state.</p><p>You can directly <code>import {produce} from &quot;flipper&quot;</code> so there is no need to add Immer as additional dependency.</p><p>A quick example:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-typescript codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">static</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">persistedStateReducer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">persistedState</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> method</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">produce</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">persistedState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token parameter">draft</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">method</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">name</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">===</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;newRecord&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      draft</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">lastRecordReceived</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token known-class-name class-name" style="color:rgb(255, 203, 107)">Date</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">now</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      draft</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">records</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">push</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="notifications"></a>Notifications<a aria-hidden="true" class="hash-link" href="#notifications" title="Direct link to heading">#</a></h2><p>Plugins can publish system notifications to alert the user of something. This is particularly useful when the plugin isn&#x27;t the current active plugin. All notifications are aggregated in Flipper&#x27;s notifications pane, accessible from the sidebar.</p><p>A notification should provide actionable and high-signal information for important events the user is likely to take action on. Notifications are generated from the data in your persistedState. To trigger notifications you need to implement a static function <code>getActiveNotifications</code>. This function should return all currently active notifications. To invalidate a notification, you simply stop including it in the result.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">static getActiveNotifications(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    persistedState: PersistedState</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ): Array&lt;Notification&gt;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>When the user clicks on a notification, they will be sent back to your plugin with the <a href="#deeplinkpayload">deepLinkPayload</a> equal to the notification&#x27;s action.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="type-parameters"></a>Type Parameters<a aria-hidden="true" class="hash-link" href="#type-parameters" title="Direct link to heading">#</a></h2><p><code>FlipperPlugin&lt;S, A, P&gt;</code> can optionally take the following type parameters. It is highly recommended you provide them to benefit from type safety, but you can pass <code>any</code> when not using these features.</p><p><strong>State</strong>: Specifies the type of the FlipperPlugin state. A <code>FlipperPlugin</code> is a React component, and this is equivalent to the React state type parameter.</p><p><strong>Actions</strong>: <code>FlipperPlugin</code> has an infrequently used dispatchAction mechanism allowing your plugin dispatch actions and reduce state in a redux-like manner. This specifies the type of actions that can be dispatched.</p><p><strong>PersistedState</strong>: This specifies the type of the persisted state of the plugin.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/facebook/flipper/blob/master/website/../docs/extending/js-plugin-api.mdx" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/extending/ui-components"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« UI Components</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/extending/create-plugin"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Client Plugin API »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_ thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#init" class="table-of-contents__link">init()</a></li><li><a href="#client" class="table-of-contents__link">Client</a><ul><li><a href="#call" class="table-of-contents__link">call</a></li><li><a href="#subscribe" class="table-of-contents__link">subscribe</a></li><li><a href="#supportsmethod" class="table-of-contents__link">supportsMethod</a></li><li><a href="#send-deprecated" class="table-of-contents__link">send (DEPRECATED)</a></li></ul></li><li><a href="#props" class="table-of-contents__link">Props</a><ul><li><a href="#persistedstate" class="table-of-contents__link">persistedState</a></li><li><a href="#setpersistedstate" class="table-of-contents__link">setPersistedState</a></li><li><a href="#selectplugin" class="table-of-contents__link">selectPlugin</a></li><li><a href="#deeplinkpayload" class="table-of-contents__link">deepLinkPayload</a></li><li><a href="#isarchiveddevice" class="table-of-contents__link">isArchivedDevice</a></li></ul></li><li><a href="#background-plugins" class="table-of-contents__link">Background Plugins</a></li><li><a href="#notifications" class="table-of-contents__link">Notifications</a></li><li><a href="#type-parameters" class="table-of-contents__link">Type Parameters</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Learn</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started/index">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/tutorial/intro">Plugin Creation Tutorial</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Plugins</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/features/index">Core Plugins</a></li><li class="footer__item"><a href="https://www.npmjs.com/search?q=keywords:flipper-plugin" target="_blank" rel="noopener noreferrer" class="footer__link-item">Community Plugins</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Legal</h4><ul class="footer__items"><li class="footer__item"><a href="https://opensource.facebook.com/legal/privacy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy</a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/terms/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://twitter.com/flipper_fb" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li><li class="footer__item"><a href="https://github.com/facebook/flipper" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="text--center"><div class="margin-bottom--sm"><img class="footer__logo" alt="Flipper Mascot" src="/img/mascot.png"></div><div>Copyright © 2021 Facebook</div></div></div></footer></div>
<script src="/styles.82c4951a.js"></script>
<script src="/runtime~main.afee353c.js"></script>
<script src="/main.ee5c6263.js"></script>
<script src="/1.744db94b.js"></script>
<script src="/70.ba3130a7.js"></script>
<script src="/73.def975d9.js"></script>
<script src="/935f2afb.7d2a613d.js"></script>
<script src="/69.7041db55.js"></script>
<script src="/ec8f03f2.5d3ccba7.js"></script>
</body>
</html>