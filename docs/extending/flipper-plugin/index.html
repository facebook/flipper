<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-extending/flipper-plugin">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.1.0">
<title data-rh="true">Desktop Plugin API | Flipper</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://fbflipper.com//docs/extending/flipper-plugin/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Desktop Plugin API | Flipper"><meta data-rh="true" name="description" content="PluginClient is the type of the client passed into a standard Sandy plugin."><meta data-rh="true" property="og:description" content="PluginClient is the type of the client passed into a standard Sandy plugin."><link data-rh="true" rel="icon" href="/img/icon.png"><link data-rh="true" rel="canonical" href="https://fbflipper.com//docs/extending/flipper-plugin/"><link data-rh="true" rel="alternate" href="https://fbflipper.com//docs/extending/flipper-plugin/" hreflang="en"><link data-rh="true" rel="alternate" href="https://fbflipper.com//docs/extending/flipper-plugin/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://OFCNCOG2CU-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Flipper RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Flipper Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="Flipper" href="/opensearch.xml">




<script src="https://buttons.github.io/buttons.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
<script src="https://fbflipper.com/js/code-blocks-buttons.js"></script>
<script src="https://fbflipper.com/js/google-analytics.js"></script><link rel="stylesheet" href="/assets/css/styles.f2622039.css">
<link rel="preload" href="/assets/js/runtime~main.dcc40e1b.js" as="script">
<link rel="preload" href="/assets/js/main.faec66e5.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script>

<div style="display: none; text-align: center; background-color: white; color: black;" id="internaldocs-banner"></div><div id="__docusaurus">
<div role="region" aria-label="theme.common.skipToMainContent"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:#20232a;color:#fff" role="banner"><div class="content_knG7 announcementBarContent_xLdY">Support Ukraine ðŸ‡ºðŸ‡¦ <a target="_blank" rel="noopener noreferrer" href="https://opensource.fb.com/support-ukraine"> Help Provide Humanitarian Aid to Ukraine</a>.</div></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/icon.png" alt="Flipper Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/icon.png" alt="Flipper Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Flipper</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/features/">Features</a><a class="navbar__item navbar__link" href="/docs/getting-started/">Setup</a><a class="navbar__item navbar__link" href="/docs/tutorial/intro/">Creating Plugins</a><a class="navbar__item navbar__link" href="/docs/internals/">Under the Hood</a><a class="navbar__item navbar__link" href="/blog/">Blog</a><a href="https://github.com/facebook/flipper" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar-github-link" aria-label="GitHub repository"></a><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/features/">Features</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/getting-started/">Setup</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/tutorial/intro/">Creating Plugins</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial/intro/">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial/ios/">Building an iOS Plugin</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial/android/">Building an Android Plugin</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial/react-native/">Building a React Native Plugin</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial/javascript/">Building a JavaScript (Browser) Plugin</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/tutorial/js-setup/">Building a Desktop Plugin</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial/js-publishing/">Publishing Your Plugin</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/extending/dev-setup/">Development Workflow</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/docs/extending/flipper-plugin/">Desktop Plugin APIs</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/extending/flipper-plugin/">Desktop Plugin API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/extending/styling-components/">Styling Components</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/extending/style-guide/">Style Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/extending/deeplinks/">Using Deeplinks</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/extending/node-apis/">Using Node.js APIs</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/extending/create-plugin/">Client Plugin APIs</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/internals/">Under the Hood</a></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Desktop Plugin API</h1></header><p><code>PluginClient</code> is the type of the <code>client</code> passed into a standard Sandy plugin.</p><p>It takes two generic arguments:</p><ul><li><code>Event</code> - mapping of an event name to the data structure of the payload, as explained in the <a href="/docs/tutorial/js-custom/#the-plugin-declaration">Tutorial</a>.</li><li><code>Methods</code> - used to describe the methods that are offered by the plugin implementation on the device. &#x27;Methods&#x27; is a mapping of a method name to a function that describes the signature of a method. The first argument of that function describes the parameters that can be passed to the client. The return type of the function describes what is returned from the client. Wrapped with a <code>Promise</code>.</li></ul><p>Following is a short example of how the above arguments can be used:</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">type</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">LogEntry</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  message</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Events that can be send by the client implementation:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">type</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Events</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  addLogEntry</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> LogEntry</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  flushLogs</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Methods we can invoke on the client:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">type</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Methods</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">retrieveLogsSince</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">params</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> since</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">number</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">Promise</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> message</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">plugin</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">client</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> PluginClient</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">Events</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> Methods</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// etc</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <code>PluginClient</code> received by the <code>plugin</code> exposes the following members, which are detailed in the following sub-sections.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="properties">Properties<a class="hash-link" href="#properties" title="Direct link to heading">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="device"><code>device</code><a class="hash-link" href="#device" title="Direct link to heading">â€‹</a></h4><p>Returns the <a href="#device">Device</a> this plugin is connected to.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="appname"><code>appName</code><a class="hash-link" href="#appname" title="Direct link to heading">â€‹</a></h4><p>The name of the application, for example &#x27;Facebook&#x27;, &#x27;Instagram&#x27; or &#x27;Slack&#x27;.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="appid"><code>appId</code><a class="hash-link" href="#appid" title="Direct link to heading">â€‹</a></h4><p>A string that uniquely identifies the current application and is based on a combination of the application name and device serial on which the application is running.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="pluginkey"><code>pluginKey</code><a class="hash-link" href="#pluginkey" title="Direct link to heading">â€‹</a></h4><p>A key that uniquely identifies this plugin instance and captures the current device/client/plugin combination.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="connected"><code>connected</code><a class="hash-link" href="#connected" title="Direct link to heading">â€‹</a></h4><h4 class="anchor anchorWithStickyNavbar_LWe7" id="isconnected"><code>isConnected</code><a class="hash-link" href="#isconnected" title="Direct link to heading">â€‹</a></h4><p>Returns whether there is currently an active connection; &#x27;true&#x27; for any of the following:</p><ol><li>The device is still connected.</li><li>The client is still connected.</li><li>The plugin is currently selected by the user <em>or</em> the plugin is running in the background.</li></ol><p>The <code>connected</code> field provides the atom that can be used in combination with <code>useValue</code> to subscribe to future updates in a component.
In contrast, <code>isConnected</code> returns a boolean that merely captures the current state.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="events">Events<a class="hash-link" href="#events" title="Direct link to heading">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="onmessage"><code>onMessage</code><a class="hash-link" href="#onmessage" title="Direct link to heading">â€‹</a></h4><p>Usage: <code>client.onMessage(event: string, callback: (params) =&gt; void)</code></p><p>Subscribes the plugin to a specific event that is fired from the client plugin (using <a href="/docs/extending/create-plugin/#push-data-to-the-desktop">connection.send</a>).
Typically used to update some of the <a href="#createstate">state</a>.
For background plugins that are currently not active in the UI, messages won&#x27;t arrive immediately, but are queued until the user opens the plugin.</p><p>Example:</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">type</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Events</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  newRow</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    id</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">number</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    title</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    url</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">plugin</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">client</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> PluginClient</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">Events</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> rows </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token generic-function function" style="color:rgb(130, 170, 255)">createState</span><span class="token generic-function generic class-name operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token generic-function generic class-name" style="color:rgb(255, 203, 107)">Record</span><span class="token generic-function generic class-name operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token generic-function generic class-name builtin" style="color:rgb(130, 170, 255)">string</span><span class="token generic-function generic class-name punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token generic-function generic class-name" style="color:rgb(255, 203, 107)"> Row</span><span class="token generic-function generic class-name operator" style="color:rgb(137, 221, 255)">&gt;&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">persist</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;rows&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  client</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">onMessage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;newRow&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">row </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/* type will be inferred correctly */</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    rows</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">update</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">draft</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      draft</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">row</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> row</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// etc</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The Flipper Sample application contains a plugin that demonstrates these API, see the <a href="/docs/extending/create-plugin/#bi-directional-communication-demo">bi-directional-communication-demo</a>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="onactivate"><code>onActivate</code><a class="hash-link" href="#onactivate" title="Direct link to heading">â€‹</a></h4><p>Usage: <code>client.onActivate(callback: () =&gt; void)</code></p><p>Called when the plugin is selected by the user and mounted into the Flipper Desktop UI. See also the closely related <a href="#onconnect">onConnect</a> event. Unlike <code>onConnect</code>, <code>onActivate</code>  triggers for archived / imported devices.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ondeactivate"><code>onDeactivate</code><a class="hash-link" href="#ondeactivate" title="Direct link to heading">â€‹</a></h4><p>Usage: <code>client.onDeactivate(callback: () =&gt; void)</code></p><p>Triggered when the plugin is unmounted from the Flipper Desktop UI because the user navigates to some other plugin. In the case the plugin is destroyed while being active, onDeactivate will still be called.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="onconnect"><code>onConnect</code><a class="hash-link" href="#onconnect" title="Direct link to heading">â€‹</a></h4><p>Usage: <code>client.onConnect(callback: () =&gt; void)</code></p><p>Triggered once the connection with the plugin on the client is established, and, for example, <a href="#send">send</a> can be called safely.
Typically, this occurs  when the plugin is activated (opened) in the Flipper Desktop.
However, for <a href="/docs/extending/create-plugin/#background-plugins">background plugins</a>, this happens immediately after the plugin has been instantiated.
This lifecycle is never triggered for archived / imported devices,</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ondisconnect"><code>onDisconnect</code><a class="hash-link" href="#ondisconnect" title="Direct link to heading">â€‹</a></h4><p>Usage: <code>client.onDisconnect(callback: () =&gt; void)</code></p><p>Triggered once the connection with the plugin on the client has been lost.
Typically, this occurs when the user leaves the plugin in the Flipper Desktop, when the plugin is disabled, or when the app or device has disconnected.
However, for <a href="/docs/extending/create-plugin/#background-plugins">background plugins</a>, this event won&#x27;t fire when the user merely navigates somewhere else.  In that case, <a href="#ondeactivate">onDeactivate</a> can be used instead.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ondestroy"><code>onDestroy</code><a class="hash-link" href="#ondestroy" title="Direct link to heading">â€‹</a></h4><p>Usage: <code>client.onDestroy(callback: () =&gt; void)</code></p><p>Called when the plugin is unloaded. This happens if the device or client has been disconnected, or when the user disables the plugin.
Note that there is no corresponding <code>onCreate</code> event, since the function body of the plugin definition acts already as &#x27;what needs to be done when the plugin is loaded/enabled&#x27;.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ondeeplink"><code>onDeepLink</code><a class="hash-link" href="#ondeeplink" title="Direct link to heading">â€‹</a></h4><p>Usage: <code>client.onDeepLink(callback: (payload: unknown) =&gt; void)</code></p><p>Triggerred when the users navigates to this plugin using a deeplink, either from an external <code>flipper://</code> plugin URL, or because the user was linked here from another plugin.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="onexport"><code>onExport</code><a class="hash-link" href="#onexport" title="Direct link to heading">â€‹</a></h4><p>Usage: <code>client.onExport(callback: (idler, onStatusMessage) =&gt; Promise&lt;state&gt;)</code></p><p>Overrides the default serialization behavior of this plugin. Should return a promise with persistable state that is to be stored, or nothing at all. This process is async, so it is possible to first fetch some additional state from the device.</p><p>Serializable is defined as &#x27;non-cyclic data, consisting purely of primitive values, plain objects, arrays or Date, Set or Map objects&#x27;.</p><p>If nothing is returned, the handler will be run, and after the handler has finished the <code>persist</code> keys of the different states will be used as export basis.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="onimport"><code>onImport</code><a class="hash-link" href="#onimport" title="Direct link to heading">â€‹</a></h4><p>Usage: <code>client.onImport(callback: (snapshot) =&gt; void)</code></p><p>Overrides the default de-serialization behavior of this plugin. Use it to update the state based on the snapshot data. This hook will be called immediately after constructing the plugin instance.</p><p>To synchonize the types of the data between <code>onImport</code> and <code>onExport</code>, it&#x27;s possible to provide a type as generic to both hooks. The next example stores <code>counter</code> under the <code>count</code> field and stores it as string rather than as number.</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">type</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">SerializedState</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  count</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">plugin</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">client</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> PluginClient</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> counter </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">createState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  client</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token generic-function function" style="color:rgb(130, 170, 255)">onExport</span><span class="token generic-function generic class-name operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token generic-function generic class-name" style="color:rgb(255, 203, 107)">SerializedState</span><span class="token generic-function generic class-name operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      count</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> counter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">get</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  client</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token generic-function function" style="color:rgb(130, 170, 255)">onImport</span><span class="token generic-function generic class-name operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token generic-function generic class-name" style="color:rgb(255, 203, 107)">SerializedState</span><span class="token generic-function generic class-name operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    counter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">set</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">parseInt</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="onunhandledmessage"><code>onUnhandledMessage</code><a class="hash-link" href="#onunhandledmessage" title="Direct link to heading">â€‹</a></h4><p>Usage: <code>client.onUnhandledMessage(callback: (event: string, params) =&gt; void)</code></p><p>This method subscribes to all messages arriving from the devices which is not handled by an <code>onMessage</code> handler.
This handler is untyped, and onMessage should be favored over using onUnhandledMessage if the event name is known upfront.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="onserveraddonstart"><code>onServerAddOnStart</code><a class="hash-link" href="#onserveraddonstart" title="Direct link to heading">â€‹</a></h4><blockquote><p>Experimental!</p></blockquote><p>Usage: <code>client.onServerAddOnStart(callback: () =&gt; void)</code></p><p>Triggered when a server add-on starts.
You should send messages to the server add-on only after it connects.
Do not forget to stop all communication when the add-on stops.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="onserveraddonstop"><code>onServerAddOnStop</code><a class="hash-link" href="#onserveraddonstop" title="Direct link to heading">â€‹</a></h4><blockquote><p>Experimental!</p></blockquote><p>Usage: <code>client.onServerAddOnStop(callback: () =&gt; void)</code></p><p>Triggered when a server add-on stops.
You should stop all communication with the server add-on when the add-on stops.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="onserveraddonmessage"><code>onServerAddOnMessage</code><a class="hash-link" href="#onserveraddonmessage" title="Direct link to heading">â€‹</a></h4><blockquote><p>Experimental!</p></blockquote><p>Usage: <code>client.onServerAddOnMessage(event: string, callback: (params) =&gt; void)</code></p><p>This subscribes the plugin to a specific event that is fired from the server add-on.</p><p>Example:</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">type</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">ServerAddOnEvents</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  newRow</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    id</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">number</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    title</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    url</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">plugin</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">client</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> PluginClient</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> ServerAddOnEvents</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> rows </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token generic-function function" style="color:rgb(130, 170, 255)">createState</span><span class="token generic-function generic class-name operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token generic-function generic class-name" style="color:rgb(255, 203, 107)">Record</span><span class="token generic-function generic class-name operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token generic-function generic class-name builtin" style="color:rgb(130, 170, 255)">string</span><span class="token generic-function generic class-name punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token generic-function generic class-name" style="color:rgb(255, 203, 107)"> Row</span><span class="token generic-function generic class-name operator" style="color:rgb(137, 221, 255)">&gt;&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">persist</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;rows&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  client</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">onServerAddOnMessage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;newRow&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">row </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/* type will be inferred correctly */</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    rows</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">update</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">draft</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      draft</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">row</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> row</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// etc</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="onserveraddonunhandledmessage"><code>onServerAddOnUnhandledMessage</code><a class="hash-link" href="#onserveraddonunhandledmessage" title="Direct link to heading">â€‹</a></h4><blockquote><p>Experimental!</p></blockquote><p>Usage: <code>client.onServerAddOnUnhandledMessage(callback: (event: string, params) =&gt; void)</code></p><p>Subscribe to all messages arriving from the server add-ons not handled by another listener.
This handler is untyped, and onMessage should be favored over using onUnhandledMessage if the event name is known upfront.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="onready"><code>onReady</code><a class="hash-link" href="#onready" title="Direct link to heading">â€‹</a></h4><p>The <code>onReady</code> event is triggered immediately after a plugin has been initialized and any pending state was restored.
This event fires after <code>onImport</code> / the interpretation of any <code>persist</code> flags and indicates that the initialization process has finished.
This event does not signal that the plugin is loaded in the UI yet (see <code>onActivated</code>) and does fire before deeplinks (see <code>onDeeplink</code>) are handled.
If a plugin has complex initialization logic it is recommended to put it in the <code>onReady</code> hook, as an error in the onReady hook won&#x27;t cause the plugin not to be loaded.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="methods">Methods<a class="hash-link" href="#methods" title="Direct link to heading">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="send"><code>send</code><a class="hash-link" href="#send" title="Direct link to heading">â€‹</a></h4><p>Usage: <code>client.send(method: string, params: object): Promise&lt;object&gt;</code></p><p>If the plugin is connected, <code>send</code> can be used to invoke a <a href="/docs/extending/create-plugin/#background-plugins">method</a> on the client implementation of the plugin.</p><p>Note that if <code>client.isConnected</code> returns <code>false</code>, calling <code>client.send</code> will throw an exception. This is the case if for example the connection with the device or application was lost.
Generally, one should guard <code>client.send</code> calls with a check to <code>client.isConnected</code>.</p><p>Example:</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">type</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Methods</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">currentLogs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">params</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">since</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">number</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">Promise</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">plugin</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">client</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> PluginClient</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> Methods</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> logs </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token generic-function function" style="color:rgb(130, 170, 255)">createState</span><span class="token generic-function generic class-name operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token generic-function generic class-name builtin" style="color:rgb(130, 170, 255)">string</span><span class="token generic-function generic class-name punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token generic-function generic class-name punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token generic-function generic class-name operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  client</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">onConnect</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">async</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">try</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> currentLogs </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">await</span><span class="token plain"> client</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">send</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;currentLogs&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        since</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> Date</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">now</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      logs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">set</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">currentLogs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">e</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token builtin" style="color:rgb(130, 170, 255)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">error</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Failed to retrieve current logs: &quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> e</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//etc</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The Flipper Sample application contains a plugin that demonstrates these API, see <a href="/docs/extending/create-plugin/#bi-directional-communication-demo">bi-directional-communication-demo</a>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="addmenuentry"><code>addMenuEntry</code><a class="hash-link" href="#addmenuentry" title="Direct link to heading">â€‹</a></h4><p>Usage: <code>client.addMenuEntry(...entry: MenuEntry[])</code></p><p>This method can be used to add menu entries to the Flipper main menu while this plugin is active.
It supports registering global keyboard shortcuts as well.
Example:</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">client</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">addMenuEntry</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    label</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;Reset Selection&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    accelerator</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;CmdOrCtrl+R&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function-variable function" style="color:rgb(130, 170, 255)">handler</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Event handling</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <code>accelerator</code> argument is optional but describes the keyboard shortcut. See the <a href="https://www.electronjs.org/docs/api/accelerator" target="_blank" rel="noopener noreferrer">Electron docs</a> for their format.</p><p>It is possible to leave out the <code>label</code>, and <code>accelerator</code> fields if a pre-defined <code>action</code> is set, which configures all three of them.
The currently pre-defined actions are <code>&quot;Clear&quot;</code>, <code>&quot;Go To Bottom&quot;</code> and <code>&quot;Create Paste&quot;</code>.
Example of using a pre-defined action:</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">client</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">addMenuEntry</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  action</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;createPaste&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function-variable function" style="color:rgb(130, 170, 255)">handler</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">async</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Event handling</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ispluginavailable"><code>isPluginAvailable</code><a class="hash-link" href="#ispluginavailable" title="Direct link to heading">â€‹</a></h4><p>Usage: <code>isPluginAvailable(pluginId: string): boolean</code></p><p>Returns <code>true</code> if a plugin with the given id is available by for consumption, that is: supported by the current application / device and enabled by the user.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="selectplugin"><code>selectPlugin</code><a class="hash-link" href="#selectplugin" title="Direct link to heading">â€‹</a></h4><p>Usage: <code>selectPlugin(pluginId: string, deeplinkPayload?: unknown): void</code></p><p>Opens a different plugin by id, optionally providing a deeplink to bring the target plugin to a certain state.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="supportsmethod"><code>supportsMethod</code><a class="hash-link" href="#supportsmethod" title="Direct link to heading">â€‹</a></h4><p>Usage: <code>client.supportsMethod(method: string): Promise&lt;Boolean&gt;</code></p><p>Resolves to true if the client supports the specified method. Useful when adding functionality to existing plugins, when connectivity to older clients is still required. Also useful when client plugins are implemented on multiple platforms and don&#x27;t all have feature parity.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="shownotification"><code>showNotification</code><a class="hash-link" href="#shownotification" title="Direct link to heading">â€‹</a></h4><p>Usage: <code>client.showNotification(notification)</code></p><p>Shows an urgent, system wide notification, that will also be registered in Flipper&#x27;s notification pane.
For on-screen notifications, we recommend using either the <code>message</code> or <code>notification</code> API from <code>antd</code> directly.</p><p>Clicking the notification will open the sending plugin. If the <code>action</code> id is set, it will be used as deeplink.</p><p>The notification interface is defined as:</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">interface</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Notification</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  id</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  title</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  message</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> React</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">ReactNode</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  severity</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;warning&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;error&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  timestamp</span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">number</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  category</span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  action</span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="writetexttoclipboard"><code>writeTextToClipboard</code><a class="hash-link" href="#writetexttoclipboard" title="Direct link to heading">â€‹</a></h4><p>Usage: <code>writeTextToClipboard(text: string)</code></p><p>Writes text to the OS-level clipboard.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="createpaste"><code>createPaste</code><a class="hash-link" href="#createpaste" title="Direct link to heading">â€‹</a></h4><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>This is a Facebook only method.</p></div></div><p>Usage: <code>client.createPaste(value: string): Promise&lt;string|undefined&gt;</code></p><p>Creates a Facebook Paste (similar to a GitHub Gist) for the given <code>value</code>.
The returned promise either contains a string with the URL of the paste, or <code>undefined</code> if the process failed.
Details of the failure will be communicated back directly to the user through Flipper notifications. For example,  if the user is currently not signed in.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="gk"><code>GK</code><a class="hash-link" href="#gk" title="Direct link to heading">â€‹</a></h4><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>This is a Facebook only method.</p></div></div><p>Usage: <code>client.GK(gatekeeper: string): boolean</code></p><p>Returns <code>true</code> if the current user is part of the given GK. <code>false</code> in all other cases.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="logger"><code>logger</code><a class="hash-link" href="#logger" title="Direct link to heading">â€‹</a></h4><p>Logger instance that logs information to the console, but also to the internal logging (in FB only builds) and which can be used to track performance (see <a href="#uselogger">useLogger</a>).</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="sendtoserveraddon"><code>sendToServerAddOn</code><a class="hash-link" href="#sendtoserveraddon" title="Direct link to heading">â€‹</a></h4><p>Usage: <code>client.sendToServerAddOn(method: string, params: object): Promise&lt;object&gt;</code></p><p>Send a message to the server add-on.</p><p>Example:</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">type</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">ServerAddOnMethods</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">currentLogs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">params</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">since</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">number</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">Promise</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">plugin</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">client</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> PluginClient</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> ServerAddOnMethods</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> logs </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token generic-function function" style="color:rgb(130, 170, 255)">createState</span><span class="token generic-function generic class-name operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token generic-function generic class-name builtin" style="color:rgb(130, 170, 255)">string</span><span class="token generic-function generic class-name punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token generic-function generic class-name punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token generic-function generic class-name operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  client</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">onServerAddOnStart</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">async</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">try</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> currentLogs </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">await</span><span class="token plain"> client</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">sendToServerAddOn</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;currentLogs&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        since</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> Date</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">now</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      logs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">set</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">currentLogs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">e</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token builtin" style="color:rgb(130, 170, 255)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">error</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Failed to retrieve current logs: &quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> e</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//etc</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For an example of how to use server add-ons, see the <a href="https://github.com/facebook/flipper/blob/main/desktop/plugins/public/reactdevtools/index.tsx" target="_blank" rel="noopener noreferrer">React DevTools plugin</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="devicepluginclient">DevicePluginClient<a class="hash-link" href="#devicepluginclient" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="properties-1">Properties<a class="hash-link" href="#properties-1" title="Direct link to heading">â€‹</a></h3><ul><li><code>device</code> - returns the <a href="#device">Device</a> this plugin is connected to.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="events-1">Events<a class="hash-link" href="#events-1" title="Direct link to heading">â€‹</a></h3><p>The following DevicePluginClient events are identical to those with the same name for the PluginClient (each of the following events links to the relative PluginClient description):</p><ul><li><a href="#ondestroy">onDestroy</a></li><li><a href="#onactivate">onActivate</a></li><li><a href="#ondeactivate">onDeactivate</a></li><li><a href="#ondeeplink">onDeepLink</a></li><li><a href="#onexport">onExport</a></li><li><a href="#onimport">onImport</a></li><li><a href="#onserveraddonstart">onServerAddOnStart</a></li><li><a href="#onserveraddonstop">onServerAddOnStop</a></li><li><a href="#onserveraddonmessage">onServerAddOnMessage</a></li><li><a href="#onserveraddonunhandledmessage">onServerAddOnUnhandledMessage</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="methods-1">Methods<a class="hash-link" href="#methods-1" title="Direct link to heading">â€‹</a></h3><p>The following DevicePluginClient methods are identical to those with the same name for the PluginClient (each of the following methods links to the relative PluginClient description):</p><ul><li><a href="#addmenuentry">addMenuEntry</a></li><li><a href="#createpaste">createPaste</a></li><li><a href="#shownotification">showNotification</a></li><li><a href="#ispluginavailable">isPluginAvailable</a></li><li><a href="#selectplugin">selectPlugin</a></li><li><a href="#sendtoserveraddon">sendToServerAddOn</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="device-1">Device<a class="hash-link" href="#device-1" title="Direct link to heading">â€‹</a></h2><p><code>Device</code> captures the metadata of the device the plugin is currently connected to.</p><p>Device objects are passed into the <code>supportsDevice</code> method of a device plugin and are available as the <code>device</code> field on a <a href="#devicepluginclient">DevicePluginClient</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="properties-2">Properties<a class="hash-link" href="#properties-2" title="Direct link to heading">â€‹</a></h3><table><thead><tr><th align="left">Property</th><th align="left">Datatype</th><th align="left">Description</th><th align="left">Values</th></tr></thead><tbody><tr><td align="left"><code>os</code></td><td align="left">String</td><td align="left">Operating System of the device.</td><td align="left"><code>&#x27;iOS&#x27;</code>, <code>&#x27;Android&#x27;</code>, <code>&#x27;Windows&#x27;</code>,<code>&#x27;MacOS&#x27;</code>, or <code>&#x27;Metro&#x27;</code></td></tr><tr><td align="left"><code>deviceType</code></td><td align="left">String</td><td align="left">Whether the device is a physical device or an emulator.</td><td align="left"><code>&#x27;emulator&#x27;</code> or <code>&#x27;physical&#x27;</code></td></tr><tr><td align="left"><code>isArchived</code></td><td align="left">Boolean</td><td align="left">A flag: <code>true</code> indicates the current device is coming from an import Flipper snapshot, and not an actually connected device.</td><td align="left">True or False</td></tr><tr><td align="left"><code>isConnected</code></td><td align="left">Boolean</td><td align="left">A flag: <code>true</code> indicates the connection to the device is still alive.</td><td align="left">True or False</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="events-2">Events<a class="hash-link" href="#events-2" title="Direct link to heading">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="onlogentry"><code>onLogEntry</code><a class="hash-link" href="#onlogentry" title="Direct link to heading">â€‹</a></h4><p>Usage: <code>device.onLogEntry(callback: (logEntry: DeviceLogEntry) =&gt; void)</code></p><p>Use this event to subscribe to the log stream that is emitted by the device.  For Android, this is using <code>adb</code> behind the scenes, for iOS <code>idb</code>, for Metro it connects to the webserver for the Metro log output, etc.</p><p>The <code>DeviceLogEntry</code> exposes the following fields:</p><table><thead><tr><th align="left">Field</th><th align="left">Datatype</th></tr></thead><tbody><tr><td align="left"><code>date</code></td><td align="left">Date</td></tr><tr><td align="left"><code>type</code></td><td align="left">string</td></tr><tr><td align="left"><code>message</code></td><td align="left">string</td></tr><tr><td align="left"><code>pid</code></td><td align="left">number</td></tr><tr><td align="left"><code>tid</code></td><td align="left">number</td></tr><tr><td align="left"><code>app</code></td><td align="left">string</td></tr><tr><td align="left"><code>tag</code></td><td align="left">string</td></tr></tbody></table><p>Possible values for <code>type</code> are: <code>&#x27;unknown&#x27;</code>, <code>&#x27;verbose&#x27;</code>, <code>&#x27;debug&#x27;</code>, <code>&#x27;info&#x27;</code>, <code>&#x27;warn&#x27;</code>, <code>&#x27;error&#x27;</code>, and <code>&#x27;fatal&#x27;</code>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="state-management">State Management<a class="hash-link" href="#state-management" title="Direct link to heading">â€‹</a></h2><p>State in Sandy plugins is stored in small containers that hold immutable values and can be consumed in React components using the <a href="#usevalue">useValue</a> hook.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="methods-2">Methods<a class="hash-link" href="#methods-2" title="Direct link to heading">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="createstate">createState<a class="hash-link" href="#createstate" title="Direct link to heading">â€‹</a></h4><p>Usage: <code>createState&lt;T&gt;(initialValue: T, options?): StateAtom&lt;T&gt;</code></p><p>The <code>createState</code> method can be used to create a small state container that lives inside a Sandy plugin.
Its value should be treated as immutable and is initialized by default using the <code>initialValue</code> parameter.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="options">Options<a class="hash-link" href="#options" title="Direct link to heading">â€‹</a></h5><p>Optionally, <code>options</code> can be provided when creating state. Supported options:</p><ul><li><code>persist: string</code> - if the <code>persist</code> value is set, this state container is serialized when a Flipper snapshot export is being made. When a snapshot is imported into Flipper, and plugins are initialized, this state container loads its initial value from the snapshot, rather than using the <code>initialValue</code> parameter. The <code>persist</code> key should be unique within the plugin and only be set if the state stored in this container is serializable and won&#x27;t become unreasonably large. See also <code>exportState</code> and <code>initialState</code> in the <a href="#testutils">TestUtils</a> section of the &#x27;Utlities&#x27; page.</li><li><code>persistToLocalStorage: boolean</code> - indicates if this option is set in combination with the <code>persist</code> option. The atom stores its state in local storage instead of as part of the plugin import / export. State stored in local storage is shared between the same plugin across multiple clients/ devices, but not actively synced.</li></ul><p>Serializable is defined as: non-cyclic data, consisting purely of primitive values, plain objects and arrays. Precisely as the root, <code>Date</code>, <code>Set</code> or <code>Map</code> objects are allowed as well but shouldn&#x27;t appear deeper in the tree.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="the-state-atom-object">The state atom object<a class="hash-link" href="#the-state-atom-object" title="Direct link to heading">â€‹</a></h5><p>A state atom object is returned by <code>createState</code>, exposing the following methods:</p><ul><li><code>get(): T</code> - returns the current value stored. If you want to use the atom object in a React component, consider using the <code>useValue</code> hook instead, to make sure the component is notified about future updates of this atom.</li><li><code>set(newValue: T)</code> - stores a new value into the atom.  If the new value is not reference-equal to the previous one, all observing components are notified.</li><li><code>update(updater: (draft: Draft&lt;T&gt;) =&gt; void)</code> - updates the current state using an <a href="https://immerjs.github.io/immer/" target="_blank" rel="noopener noreferrer">Immer</a> recipe. In the <code>updater</code>, the <code>draft</code> object can be safely (deeply) mutated. Once the <code>updater</code> finishes, Immer will compute a new immutable object based on the changes, and store that. This is often simpler than using a combination of <code>get</code> and <code>set</code> if deep updates need to be made to the stored object.</li><li><code>subscribe(listener: (value: T, prevValue: T) =&gt; void): () =&gt; void</code> - subscribes a listener function to the state updates. The Listener function receives the next and previous value on each update. The method also returns function which can be called to unsubscribe the listener from further updates.</li><li><code>unsubscribe(listener: (value: T, prevValue: T) =&gt; void): void</code> - unsubscribes a listener function from the state updates if it was subscribed before.</li></ul><h5 class="anchor anchorWithStickyNavbar_LWe7" id="example">Example<a class="hash-link" href="#example" title="Direct link to heading">â€‹</a></h5><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">createState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;flipper-plugin&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> rows </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token generic-function function" style="color:rgb(130, 170, 255)">createState</span><span class="token generic-function generic class-name operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token generic-function generic class-name builtin" style="color:rgb(130, 170, 255)">string</span><span class="token generic-function generic class-name punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token generic-function generic class-name punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token generic-function generic class-name operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">persist</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;rows&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> selectedID </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token generic-function function" style="color:rgb(130, 170, 255)">createState</span><span class="token generic-function generic class-name operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token generic-function generic class-name builtin" style="color:rgb(130, 170, 255)">string</span><span class="token generic-function generic class-name" style="color:rgb(255, 203, 107)"> </span><span class="token generic-function generic class-name operator" style="color:rgb(137, 221, 255)">|</span><span class="token generic-function generic class-name" style="color:rgb(255, 203, 107)"> </span><span class="token generic-function generic class-name keyword" style="color:rgb(255, 203, 107);font-style:italic">null</span><span class="token generic-function generic class-name operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">null</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">persist</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;selection&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Listener is called on each rows.set() and rows.update() call until unsubscribed.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> unsubscribe </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> rows</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">subscribe</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">value</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> prevValue</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token builtin" style="color:rgb(130, 170, 255)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token template-string string" style="color:rgb(195, 232, 141)">Rows state updated. New length: </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(199, 146, 234)">${</span><span class="token template-string interpolation">value</span><span class="token template-string interpolation punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token template-string interpolation">length</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token template-string string" style="color:rgb(195, 232, 141)">. Prev length: </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(199, 146, 234)">${</span><span class="token template-string interpolation">prevValue</span><span class="token template-string interpolation punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token template-string interpolation">length</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token template-string string" style="color:rgb(195, 232, 141)">.</span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">rows</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">set</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;hello&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Listener will be notified about the change</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin" style="color:rgb(130, 170, 255)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">rows</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">get</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">length</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">unsubscribe</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Do not notify listener anymore</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">rows</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">update</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">draft </span><span class="token operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Listener won&#x27;t be notified about the change</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  draft</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">push</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;world&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin" style="color:rgb(130, 170, 255)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">rows</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">get</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">length</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="createdatasource">createDataSource<a class="hash-link" href="#createdatasource" title="Direct link to heading">â€‹</a></h4><p>Usage: <code>createDataSource&lt;T&gt;(initialSet?: T[], options?): DataSource&lt;T&gt;</code></p><p>Most Flipper plugins follow the basic concept of receiving events from the device, store them, and being able to tail, filter and search them.
To optimise for this situation, there is a dedicated <code>createDataSource</code> abstraction which creates a <code>DataSource</code>.
<code>DataSource</code> is a data collection that is heavily optimized for <code>append</code> and <code>update</code>,
which stores items based on insertion order, but also allows for efficient by-id lookups.</p><p>Each <code>DataSource</code> exposes a default <code>view</code> property, which contains a <code>DataSourceView</code>.
A <code>DataSourceView</code> is a materialized view that can be sorted, filtered and windowed, and is kept incrementally up to date with the underlying <code>DataSource</code>.</p><p>When using the <code>DataTable</code> component, this <code>view</code> will be managed by the table automatically, giving plugin users the capability to freely sort, filter, search and tail your datasource.
Alternatively, you could also pass in a different view(like from additionalViews) to the <code>DataTable</code> component which allows for different filters, searches, etc. than the default <code>view</code>.</p><p>Valid <code>options</code> are:</p><ul><li><code>key</code> - if a key is set, the given field of the records is assumed to be unique, and its value can be used to perform lookups and upserts.</li><li><code>limit</code> - the maximum number of records that this DataSource will store. If the limit is exceeded, the oldest records will automatically be dropped to make place for the new ones. Defaults to 100.000 records.</li><li><code>persist</code> - see the <code>createState</code> <code>persist</code> option: If set, this data source will automatically be part of Flipper imports / exports; it&#x27;s recommended to set this option.</li></ul><p>All records stored in a data source should be treated as being immutable. To update a record, replace it with a new value using the <code>update</code> or <code>upsert</code> operations.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="example-1">Example<a class="hash-link" href="#example-1" title="Direct link to heading">â€‹</a></h5><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">devicePlugin</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">client</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> DevicePluginClient</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> rows </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token generic-function function" style="color:rgb(130, 170, 255)">createDataSource</span><span class="token generic-function generic class-name operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token generic-function generic class-name" style="color:rgb(255, 203, 107)">ExtendedLogEntry</span><span class="token generic-function generic class-name operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    limit</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">200000</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    persist</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;logs&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  client</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">device</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">onLogEntry</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">entry </span><span class="token operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    rows</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">append</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">entry</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    rows</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="datasource">DataSource<a class="hash-link" href="#datasource" title="Direct link to heading">â€‹</a></h4><p>Stores large amounts of records efficiently. For an introducrion, see <a href="#createdatasource">createDataSource</a>.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="limit">limit<a class="hash-link" href="#limit" title="Direct link to heading">â€‹</a></h5><p>The maximum number of records that can be stored in this DataSource to constrain memory usage. Defaults to 100.000 rows. If the limit is exceeded, the oldest 10% of records is dropped. This field is writable but does not immediately truncate if changed.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="view">view<a class="hash-link" href="#view" title="Direct link to heading">â€‹</a></h5><p>Returns the currently active default view on the data source. Note that be default it is windowed on the impractical <code>[0, 0)</code> range. For more details, see <a href="#datasourceview">DataSourceView</a>.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="additionalviews">additionalViews<a class="hash-link" href="#additionalviews" title="Direct link to heading">â€‹</a></h5><p>Holds additional <code>DataSourceView</code> on this <code>DataSource</code>. It contains key of <code>viewId: string</code> and value of <code>DataSourceView&lt;T, KeyType&gt;</code>. The default view in <code>DataSource</code> has <code>DEFAULT_VIEW_ID = &#x27;0&#x27;</code>, so all additionalViews cannot use this as the <code>viewId</code>. This is a <code>readonly</code> array and additional views are appended to the array by calling <code>getAdditionalView(viewId: string)</code> with a new <code>viewId</code></p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="size">size<a class="hash-link" href="#size" title="Direct link to heading">â€‹</a></h5><p>The total number of records stored in this data source.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="records">records<a class="hash-link" href="#records" title="Direct link to heading">â€‹</a></h5><p>Usage: <code>records(): T[]</code>. Returns all values stored in this data source in a defensive copy. Note that this operation performs <code>O(n)</code>, so typically one should operate on a subset of the records using <code>size</code> and <code>get</code>.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="get">get<a class="hash-link" href="#get" title="Direct link to heading">â€‹</a></h5><p>Usage: <code>get(index: number): T</code>. Returns the record at the given index, which is insertion order based. This operation does not take into consideration the current view. See also <code>view.get</code> to get a record based on <em>visible</em> position. To look items up based on their id, use <code>getById</code>.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="getbyid">getById<a class="hash-link" href="#getbyid" title="Direct link to heading">â€‹</a></h5><p>Usage: <code>getById(key: string): T | undefined</code> (for example, <code>users.getById(&quot;jane&quot;)</code>. Returns the record associated with the given key, or <code>undefined</code>. This method can only be used if the <code>key</code> option was passed to <code>createDataSource</code>.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="keys">keys<a class="hash-link" href="#keys" title="Direct link to heading">â€‹</a></h5><p>Usage: <code>keys()</code>, returns an iterator that will iterate all keys in the data source. For example, to create an array of all keys: <code>const usernames = Array.from(users.keys())</code>. This method can only be used if the <code>key</code> option was passed to <code>createDataSource</code>.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="entries">entries<a class="hash-link" href="#entries" title="Direct link to heading">â€‹</a></h5><p>Usage: <code>entries()</code>. Similar to <code>keys()</code>, but will return an iterator that generate entry tuples, in the shape of <code>[key, value]</code>.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="symboliterator">[Symbol.iterator]<a class="hash-link" href="#symboliterator" title="Direct link to heading">â€‹</a></h5><p><code>DataSource</code> supports the iterator protocol, so to visit all stored records one can use <code>for (const user of users) {....}</code>.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="getindexofkey">getIndexOfKey<a class="hash-link" href="#getindexofkey" title="Direct link to heading">â€‹</a></h5><p>Usage: <code>getById(key: string): number</code>. Returns the insertion index of the record associated with the given key, or <code>-1</code>. This method can only be used if the <code>key</code> option was passed to <code>createDataSource</code>.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="append">append<a class="hash-link" href="#append" title="Direct link to heading">â€‹</a></h5><p>Usage: <code>append(record: T)</code>. Appends a new record to the data collection. This method will throw if a duplicate key is inserted. Use <code>upsert</code> to automatically append <em>or</em> update. Mutations like <code>append</code> will be reflected in the <code>view</code> automatically.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="update">update<a class="hash-link" href="#update" title="Direct link to heading">â€‹</a></h5><p>Usage: <code>update(index: number, record: T)</code>. Replaces the given record in the data sources.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="delete">delete<a class="hash-link" href="#delete" title="Direct link to heading">â€‹</a></h5><p>Usage: <code>delete(index: number)</code>. Remove the record at the given index from the datasource. Note that if a the <code>key</code> option of the datasource is set, this operation degrades to <code>O(n)</code> performance and should typically be avoided.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="deletebyid">deleteById<a class="hash-link" href="#deletebyid" title="Direct link to heading">â€‹</a></h5><p>Usage: <code>delete(key: string): boolean</code>. Removes the record with the given key. Returns <code>true</code> if the record existed and has been removed. This operation is <code>O(n)</code> expensive and should generally be avoided.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="shift">shift<a class="hash-link" href="#shift" title="Direct link to heading">â€‹</a></h5><p>Usage: <code>shift(amount: number)</code>. Removes the first <code>amount</code> records from the datasource. This is generally a performant operation.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="clear">clear<a class="hash-link" href="#clear" title="Direct link to heading">â€‹</a></h5><p>Usage: <code>clear()</code>. Removes all records from this data source.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="getadditionalview">getAdditionalView<a class="hash-link" href="#getadditionalview" title="Direct link to heading">â€‹</a></h5><p>Usage: <code>getAdditionalView(viewId: string)</code>. Gets an additional <code>DataSourceView</code> of the <code>DataSource</code> by passing in an identifier <code>viewId</code>. If there already exists a <code>DataSourceView</code> with the <code>viewId</code>, we simply return that view instead.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="datasourceview">DataSourceView<a class="hash-link" href="#datasourceview" title="Direct link to heading">â€‹</a></h4><p>A materialized view on a DataSource, which can apply windowing, sorting and filtering and will be kept incrementally up to date with the underlying datasource.
Note that the default window is empty, so after obtaining a <code>DataSourceView</code> one should typically call <code>setWindow</code>. For an introduction, see <!-- -->[createDataSource]<!-- -->.</p><p>The DataSourceView API is important if are creating your own visualization of a <code>DataSource</code>.
However, if a <code>DataSource</code> is visualized using a <code>DataTable</code>, there is typically no need to directly interact with this API.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="datasource-1">datasource<a class="hash-link" href="#datasource-1" title="Direct link to heading">â€‹</a></h5><p>A reference to the underlying <a href="#datasource">DataSource</a>.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="windowstart">windowStart<a class="hash-link" href="#windowstart" title="Direct link to heading">â€‹</a></h5><p>See <a href="#setwindow">setWindow</a>.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="windowend">windowEnd<a class="hash-link" href="#windowend" title="Direct link to heading">â€‹</a></h5><p>See <a href="#setwindow">setWindow</a>.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="size-1">size<a class="hash-link" href="#size-1" title="Direct link to heading">â€‹</a></h5><p>The total size of the current view after applying filtering. Note that <code>size</code> does <em>not</em> reflect windowing. To get the window size use: <code>windowEnd - windowStart</code>. To get the total amount of records, without respecting the current filter, use <code>datasource.size</code>.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="issorted">isSorted<a class="hash-link" href="#issorted" title="Direct link to heading">â€‹</a></h5><p>Returns <code>true</code> if a sort criterium is set.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="isfiltered">isFiltered<a class="hash-link" href="#isfiltered" title="Direct link to heading">â€‹</a></h5><p>Returns <code>true</code> if a filter criterium is set.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="isrevered">isRevered<a class="hash-link" href="#isrevered" title="Direct link to heading">â€‹</a></h5><p>Return <code>true</code> if the current view will be shown in reverse order.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="output">output<a class="hash-link" href="#output" title="Direct link to heading">â€‹</a></h5><p>Usage: <code>output(): T[]</code> or <code>output(start, end): T[]</code>. Returns a defensive copy of all items visible in the provided range window. If <code>start</code> and <code>end</code> are omitted, the current window will be used. To get all items visible in the current view, ignoring the window, use <code>view.output(0, view.size)</code>.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="symboliterator-1">[Symbol.iterator]<a class="hash-link" href="#symboliterator-1" title="Direct link to heading">â€‹</a></h5><p><code>DataSourceView</code> supports the iterator protocol, so the currently visible output can be iterated using for example <code>for (const user in users.view) { ... }</code>. The iterator will always apply the current window.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="setwindow">setWindow<a class="hash-link" href="#setwindow" title="Direct link to heading">â€‹</a></h5><p>Usage: <code>setWindow(start, end)</code>. This method sets the current visible window to the specified range (which will include <code>start</code>, but not <code>end</code>, so <code>[start, end)</code>).</p><p>Setting a window impacts the default behavior of <code>output</code> and <code>iterator</code> and, more importantly, the behavior of any listener: <code>update</code> events that happen outside the window will not be propagated to any listeners, and <code>shift</code> events will describe whether the happened <code>in</code>, <code>before</code>, or <code>after</code> the current window.</p><p>Windowing will always be applied only after applying any filters, sorting and reversing.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="setfilter">setFilter<a class="hash-link" href="#setfilter" title="Direct link to heading">â€‹</a></h5><p>Usage: <code>setFilter(filter: (record: T) =&gt; boolean)</code>. Applies a filter to the current records. This will typically reduce <code>size</code> of this view. Example: <code>users.view.setFilter(user =&gt; user.age &gt;= 18)</code>.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="setsortby">setSortBy<a class="hash-link" href="#setsortby" title="Direct link to heading">â€‹</a></h5><p>Usage: <code>setSortBy(field: string)</code> or <code>setSortBy(sortBy: (irecord: T) =&gt; primitive)</code>. For example: <code>users.view.setSortBy(&quot;age&quot;)</code> or <code>users.viewSetSortBy(user =&gt; </code>${user.lastName} ${user.firstName}<code>)</code>. <code>setSortBy</code> will cause the data source to be sorted by the given field or criterium function. Sort is implemented efficiently by using a binary search to insert / remove newly arriving records, rather than performing a full sort. But this means that the sort function should be stable and pure.</p><p>Sorting will always happen in ascending order, and if duplicate sort values appear, the insertion order will take precedence. To sort in descending order, use <code>setReversed</code>. If a view doesn&#x27;t have sorting specified, it will always show records in insertion order.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="togglerevered">toggleRevered<a class="hash-link" href="#togglerevered" title="Direct link to heading">â€‹</a></h5><p>Usage: <code>toggleReversed()</code>. Toggles the output order between ascending and descending.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="setreversed">setReversed<a class="hash-link" href="#setreversed" title="Direct link to heading">â€‹</a></h5><p>Usage: <code>setReversed(ascending: boolean)</code>. Defines whether the output colletion is shown normal (ascending) or reverse (descending) order.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="reset">reset<a class="hash-link" href="#reset" title="Direct link to heading">â€‹</a></h5><p>Usage: <code>reset()</code>. Resets the window, filtering, sorting and reverse to their defaults. Note that this puts the window back to <code>[0, 0)</code> as well, meaning now records will be part of the output.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="get-1">get<a class="hash-link" href="#get-1" title="Direct link to heading">â€‹</a></h5><p>Usage: <code>get(index: number)</code>. Returns the record at the given position in the output. The <code>index</code> parameter respects sorting, filtering and reversing, but does <em>not</em> respect any window offset. So <code>get(0)</code> will return the first record in the datasource according to the given filtering, sorting and reversing, while <code>get(windowStart)</code> will return the first of the records visible in the current window.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="setlistener">setListener<a class="hash-link" href="#setlistener" title="Direct link to heading">â€‹</a></h5><p>Usage: <code>setListener(callback: undefined | (event: OutputChange) =&gt; void)</code>. Sets up a listener that will get notified whenever the <code>output</code> or <code>size</code> of this view changes. This can be used to, for example, update the UI and is used by <code>DataTable</code> under the hood.
The following events can be emitted. These events respect the current sorting, filtering and reversing. The shift <code>location</code> is expressed relatively to the current window. Now <code>update</code> events that are outside the current window will be emitted. <code>reset</code> events are typically emitted if a change happened that cannot be expressed in a limited number of shifts / updates. Such as changing sorting or filtering, calling <code>clear()</code> or <code>reset()</code>, or doing a large <code>shift</code>.</p><p>Currently only one listener is allowed at a time. Please contact the Flipper oncall if that doesn&#x27;t suffice.</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">type</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">OutputChange</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      type</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;shift&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      index</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">number</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// the position at which records were inserted or removed</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      location</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;before&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;in&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;after&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// relative to current window</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      delta</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">number</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// how many records were inserted (positive number) or removed (negative number)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      newCount</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">number</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// the new .size of the DataSourceView</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// an item, inside the current window, was changed</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      type</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;update&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      index</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">number</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// something big and awesome happened. Drop earlier updates to the floor and start again</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// like: clear, filter or sorting change, etc</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      type</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;reset&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      newCount</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">number</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="react-hooks">React Hooks<a class="hash-link" href="#react-hooks" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="methods-3">Methods<a class="hash-link" href="#methods-3" title="Direct link to heading">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="useplugin">usePlugin<a class="hash-link" href="#useplugin" title="Direct link to heading">â€‹</a></h4><p>Usage: <code>const instance = usePlugin(plugin)</code></p><p>Can be used by any component in the plugin, and gives the current <code>instance</code> that corresponds with the currently loaded plugin.
The <code>plugin</code> parameter isn&#x27;t actually used; it verifies that a component is used correctly inside a mounted component and helps with type inference.
The returned <code>instance</code> method corresponds to the object that is returned from the <code>plugin</code> / <code>devicePlugin</code> definition.</p><p>See the <a href="/docs/tutorial/js-custom/#building-a-user-interface-for-the-plugin">Tutorial</a> for how this hook is used in practice.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="usevalue">useValue<a class="hash-link" href="#usevalue" title="Direct link to heading">â€‹</a></h4><p>Usage: <code>const currentValue = useValue(stateAtom)</code></p><p>Returns the current value of a state atom, and also subscribes the current component to future changes of the atom (in contrast to using <code>stateAtom.get()</code> directly).</p><p>See the <a href="/docs/tutorial/js-custom/#building-a-user-interface-for-the-plugin">Tutorial</a> for how this hook is used in practice.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="uselogger">useLogger<a class="hash-link" href="#uselogger" title="Direct link to heading">â€‹</a></h4><p>Usage: <code>const logger = useLogger()</code></p><p>Provides the default logger that can be used for console logging, error reporting and performance measurements.
In internal Meta builds, this is wired up to the internal statistic reporting. Use <code>logger</code> rather than using <code>console</code> directly.</p><p>The logger API is defined as:</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">interface</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Logger</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">track</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">type</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> TrackType</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> event</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> data</span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">any</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> plugin</span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">void</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">trackTimeSince</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    mark</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    eventName</span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">null</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">undefined</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    data</span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">any</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">void</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">info</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">data</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">any</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> category</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">void</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">warn</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">data</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">any</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> category</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">void</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">error</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">data</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">any</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> category</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">void</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">debug</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">data</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">any</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> category</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">void</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="usetrackedcallback">useTrackedCallback<a class="hash-link" href="#usetrackedcallback" title="Direct link to heading">â€‹</a></h4><p>Usage: <code>const eventHandler = useTrackedCallback(&quot;Interaction description&quot;, handlerFunction, deps)</code></p><p>Utility that wraps React&#x27;s <code>useCallback</code> with tracking capabilities.
The API is similar, except that the first argument describes the interaction handled by the given event handler.
For more information, see <a href="#tracked">Tracked</a> in the UI Components page.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="usememoize">useMemoize<a class="hash-link" href="#usememoize" title="Direct link to heading">â€‹</a></h4><p>Slight variation on useMemo that encourages to create hoistable memoization functions,
which encourages reuse and testability by no longer closing over variables that are used by the memoized function, but rather receiving them as arguments so that these functions beome pure.</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(130, 170, 255)">MyComponent</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">findMetroDevice</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> props</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> connections </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">useSomeHook</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> metroDevice </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">useMemoize</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    findMetroDevice</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">connections</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">devices</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// etc</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">findMetroDevice</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">findMetroDevice</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> deviceList</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> deviceList</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">find</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">findMetroDevice</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="uselocalstoragestate">useLocalStorageState<a class="hash-link" href="#uselocalstoragestate" title="Direct link to heading">â€‹</a></h4><p>Like <code>useState</code>, but the value will be stored in local storage under the given key and read back upon initialization.
The hook signature is similar to <code>useState</code>, except that the first argument is the storage key.
The storage key will be scoped automatically to the current plugin and any additional tracking scopes. (See <a href="#trackingscope">TrackingScope</a> in the &#x27;UI Components&#x27; page).</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">showWhitespace</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> setShowWhitespace</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">useLocalStorageState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token template-string string" style="color:rgb(195, 232, 141)">showWhitespace</span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ui-components">UI components<a class="hash-link" href="#ui-components" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="layout">Layout.*<a class="hash-link" href="#layout" title="Direct link to heading">â€‹</a></h3><p>Layout elements can be used to organize the screen layout.
See the <a href="/docs/extending/style-guide/">Style Guide</a> for more details.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="highlightcontext">HighlightContext<a class="hash-link" href="#highlightcontext" title="Direct link to heading">â€‹</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="highlightprovider">HighlightProvider<a class="hash-link" href="#highlightprovider" title="Direct link to heading">â€‹</a></h3><p>React context provider for Highlight context. All wrapped componets can access context or use the useHighligher helper. Example</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">HighlightProvider</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  text</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">searchTerm</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  highlightColor</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">theme</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">searchHighlightBackground</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">yellow</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">HighlightedText text</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;Lorem itsum&#x27;</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">HighlightProvider</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="usehighlighter">useHighlighter<a class="hash-link" href="#usehighlighter" title="Direct link to heading">â€‹</a></h3><p>Hook to be used inside a Highlight context to render text with highlighting applied. Example</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">HighlightedText</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">props</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">text</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> highlightManager</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> HighlightManager </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">useHighlighter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">span</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">highlightManager</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">render</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">props</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">text</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">span</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="datatable">DataTable<a class="hash-link" href="#datatable" title="Direct link to heading">â€‹</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="dataformatter">DataFormatter<a class="hash-link" href="#dataformatter" title="Direct link to heading">â€‹</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="datainspector">DataInspector<a class="hash-link" href="#datainspector" title="Direct link to heading">â€‹</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="datadescription">DataDescription<a class="hash-link" href="#datadescription" title="Direct link to heading">â€‹</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="markertimeline">MarkerTimeline<a class="hash-link" href="#markertimeline" title="Direct link to heading">â€‹</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="elementsinspector">ElementsInspector<a class="hash-link" href="#elementsinspector" title="Direct link to heading">â€‹</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="elementattribute">ElementAttribute<a class="hash-link" href="#elementattribute" title="Direct link to heading">â€‹</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="elementdata">ElementData<a class="hash-link" href="#elementdata" title="Direct link to heading">â€‹</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="elementextrainfo">ElementExtraInfo<a class="hash-link" href="#elementextrainfo" title="Direct link to heading">â€‹</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="elementid">ElementID<a class="hash-link" href="#elementid" title="Direct link to heading">â€‹</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="elementsearchresultset">ElementSearchResultSet<a class="hash-link" href="#elementsearchresultset" title="Direct link to heading">â€‹</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="elementsinspectorelement">ElementsInspectorElement<a class="hash-link" href="#elementsinspectorelement" title="Direct link to heading">â€‹</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="elementsinspectorprops">ElementsInspectorProps<a class="hash-link" href="#elementsinspectorprops" title="Direct link to heading">â€‹</a></h3><p>Coming soon</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="masterdetail">MasterDetail<a class="hash-link" href="#masterdetail" title="Direct link to heading">â€‹</a></h3><p>The <code>MasterDetail</code> provides a default setup for a <code>DataTable</code> in combination with a sidebar, and some super common features like keyboard shortcuts, paste integration, and clear / pause-resume buttons.</p><p>The <code>MasterDetail</code> component accepts all <code>DataTable</code> props, and beyond that the following props.</p><ul><li>The <code>sidebarPosition</code> prop controls here to display the details of the currently selected record:<ul><li><code>&#x27;main&#x27;</code> (default): show the details in the standard, centrally controlled right sidebar</li><li><code>&#x27;right&#x27;</code>: show a resizable pane to the right</li><li><code>&#x27;bottom&#x27;</code>: show a resizable pane to the bottom</li><li><code>&#x27;none&#x27;</code>: don&#x27;t show details at all</li></ul></li><li><code>sidebarComponent</code>: Component that accepts a &#x27;record&#x27; prop that is used to render details.If none is provided, a standard <code>DataInspector</code> component will be used to display the entire record.</li><li><code>sidebarSize</code>: Default size of the sidebar.</li><li><code>selection</code>: If provided, this atom will be used to store selection in.</li><li><code>isPaused</code>: If provided, this atom will be used to store pause/resume state in, and a pause/resume toggle will be shown</li><li>`enableClear: If set, a clear button will be shown. By default, this will clear the dataSource (if any).</li><li><code>onClear</code>: Callback to be called when clear action is used.</li><li><code>enableMenuEntries</code>: If provided, standard menu entries will be created for clear, goToBottom and createPaste.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="panel">Panel<a class="hash-link" href="#panel" title="Direct link to heading">â€‹</a></h3><p>A collapsible UI region. The collapsed state of the pane will automatically be persisted so that the collapsed state is restored the next time user visits the plugin again. Note that the children of a Panel should have some size, either a fixed or a natural size. Elements that grow to their parent size will become invisible.</p><p>For demos and property documentation see the &#x27;Flipper style guide&#x27;.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tabs">Tabs<a class="hash-link" href="#tabs" title="Direct link to heading">â€‹</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tab">Tab<a class="hash-link" href="#tab" title="Direct link to heading">â€‹</a></h3><p>The <code>Tabs</code> and <code>Tab</code> component re-expose the TabControl as provided by Antd, and support the same properties. For more details, see the official <a href="https://ant.design/components/tabs/" target="_blank" rel="noopener noreferrer">Ant Design</a> docs.</p><p>The following additional property is supported:</p><ul><li><code>grow</code>. If set, the tab control will use all available vertical space. By default <code>false</code>.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="toolbar">Toolbar<a class="hash-link" href="#toolbar" title="Direct link to heading">â€‹</a></h3><p>A horizontal panel to organize buttons and alike. Basically a <code>Layout.Horizontal</code> with a border, padding, gap and wrapping enabled.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="codeblock">CodeBlock<a class="hash-link" href="#codeblock" title="Direct link to heading">â€‹</a></h3><p>A preformatted paragraph that supports wrapping, preserves whitespace and uses monospace.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="datalist">DataList<a class="hash-link" href="#datalist" title="Direct link to heading">â€‹</a></h3><p>The DataList can be used to display a set of items efficiently, and where a single item can be selected.</p><p>Properties:</p><ul><li><code>items</code>: Items to display. Per item at least a title and unique id should be provided.</li><li><code>value</code>: The current selection</li><li><code>onSelect</code></li><li><code>onRenderItem</code>: A custom render function. By default, the component will render the <code>title</code> in bold and description (if any) below it.</li><li><code>type</code>: <code>default</code> or `dropdown. Defines the styling of the component. By default shows a list, but alternatively the items can be displayed in a drop down</li><li><code>scrollable</code>: By default the data list will take all available space and scroll if items aren&#x27;t otherwise visible. By setting <code>scrollable={false}</code> the list will only take its natural size</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="dialog">Dialog<a class="hash-link" href="#dialog" title="Direct link to heading">â€‹</a></h3><p>The <code>Dialog</code> namespace provides a set of utility to prompt the user with feedback of input. Rather than spawning dialogs by hand, the benefit of the <code>Dialog</code> utilities is that they all return promises capture the results.</p><p>The promises returned by <code>Dialog</code> will resolve to <code>false</code> if the user intentionally closed the dialog (typically by using cancel / escape / clicking the close button).</p><p>The promises returned by <code>Dialog</code> utilities will expose a <code>close()</code> method that can be used to programmatically close a dialog. In which case the pending promise will resolve to <code>false</code> as well.</p><p>General properties accepted by the <code>Dialog</code> utility:</p><ul><li><code>title</code> - Overrides the title of the dialog, defaults to empty.</li><li><code>width</code> - Overrides the default width (400) for dialogs. Number in pixels.</li><li><code>okText</code> - Overrides the caption of the OK button</li><li><code>cancelText</code> - Overrides the caption of the Cancel button</li></ul><p>Available utilities</p><ul><li><code>Dialog.confirm(options): Promise&lt;boolean&gt;</code>. Show a confirmation dialog twithino the user. Options:<ul><li><code>message</code>: Description of what the user is confirming.</li></ul></li><li><code>Dialog.prompt(options): Promise&lt;string | false&gt;</code>. Inspired by <code>window.prompt</code>. Prompt the user for some input. Options:<ul><li><code>message</code>: Text accompanying the input</li><li><code>defaultValue</code></li><li><code>onConfirm(value) =&gt; Promise&lt;string&gt;</code>. Can be used to transform the inputted value before resolving the prompt promise. If the handler throws, this will be shown as validation error in the dialog.</li></ul></li><li><code>Dialog.loading(options): Promise&lt;void&gt;</code>. Shows a dialog with a loading spinner. This dialog cannot be closed by the user, so instead <code>.close()</code> should be called programmatically on the returned promise.<ul><li><code>message</code>: Message to display with the loading spinner.</li></ul></li><li><code>Dialog.show&lt;T&gt;(options): Promise&lt;T | false</code>. Low level building block to build dialogs. Options:<ul><li><code>children</code>: React Element to render as children of the dialog.</li><li><code>onConfirm: () =&gt; Promise&lt;T&gt;</code>. Handler to handle the OK button, which should produce the value the <code>Dialog.show</code> call will resolve to.</li></ul></li><li><code>Dialog.alert(options)</code> show a small dialog, inspired by window.alert. Returns a <code>Promise&lt;void&gt;</code>. Options:<ul><li><code>type</code>, determines style. One of: <code>&#x27;info&#x27; | &#x27;error&#x27; | &#x27;warning&#x27; | &#x27;success&#x27;</code>.</li><li><code>message</code> parameter to specify the content of the dialog.</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="spinner">Spinner<a class="hash-link" href="#spinner" title="Direct link to heading">â€‹</a></h3><p>Shows a loading spinner. Accept an optional <code>size</code> to make the spinner larger / smaller.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="nux">NUX<a class="hash-link" href="#nux" title="Direct link to heading">â€‹</a></h3><p>An element that can be used to provide a New User eXperience: Hints that give a one-time introduction to new features to the current user.</p><p>For more details, see the <a href="/docs/extending/style-guide/">Style Guide</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fileselector">FileSelector<a class="hash-link" href="#fileselector" title="Direct link to heading">â€‹</a></h3><p>Enables file uploading. Shows an input with an upload button. User can select and upload files by clicking on the button, on the input, by pressing enter when the input is focused, and by dropping a file on the input. The input&#x27;s value is a path to a file or its name if path is not available (in browsers).</p><p>Exports <code>FileSelector</code> components with the following props:</p><ol><li><code>label</code> -  placeholder text displayed in the input when it is empty.</li><li><code>onChange</code> - callback called when new files are selected or when the existing selection is reset.</li><li><code>multi</code> - <!-- -->[optional]<!-- --> allows selecting multiple files at once.</li><li><code>extensions</code> - <!-- -->[optional]<!-- --> list of allowed file extensions.</li><li><code>required</code> - <!-- -->[optional]<!-- --> boolean to mark the file selection input as required.</li><li><code>encoding</code> - <!-- -->[optional]<!-- --> imported file encoding. Default: UTF-8.</li><li><code>className</code> - <!-- -->[optional]<!-- --> class name string.</li><li><code>style</code> - <!-- -->[optional]<!-- --> CSS styles object.</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="detailsidebar">DetailSidebar<a class="hash-link" href="#detailsidebar" title="Direct link to heading">â€‹</a></h3><p>An element that can be passed children which will be shown in the right sidebar of Flipper.
Horizontal scrolling will be enabled by default.
To fine-tune the default dimensions use <code>width</code> and <code>minWidth</code>.
It doesn&#x27;t really matter where exactly this component is used in your layout, as the contents will be moved to the main Flipper chrome, rather than being rendered in place.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="theme-object">theme object<a class="hash-link" href="#theme-object" title="Direct link to heading">â€‹</a></h3><p>Provides a standard set of colors and spacings, used by the Flipper <a href="/docs/extending/style-guide/">Style Guide</a>.
The colors exposed here support dark mode.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="utilities">Utilities<a class="hash-link" href="#utilities" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="getflipperlib">getFlipperLib<a class="hash-link" href="#getflipperlib" title="Direct link to heading">â€‹</a></h3><p>A set of globally available utilities such as opening links, interacting with the clipboard (see the following example), and many more.</p><p>Example:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">getFlipperLib().writeTextToClipboard(&quot;hello from Flipper&quot;);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The full set of utilities is listed in <a href="https://github.com/facebook/flipper/blob/main/desktop/flipper-plugin-core/src/plugin/FlipperLib.tsx#L95" target="_blank" rel="noopener noreferrer">FlipperLib.tsx</a>.</p><p>Since the Node.js system API&#x27;s cannot be used directly by Flipper plugins (when running in a browser), the utilties exposed on <code>getFlipperLib().remoteServerContext</code> should be used instead, as detailed in <a href="/docs/extending/node-apis/">Using Node.js APIs</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="createtableplugin">createTablePlugin<a class="hash-link" href="#createtableplugin" title="Direct link to heading">â€‹</a></h3><p>A utility to create a plugin that consists of a main table and details JSON view with minimal effort. For an example, see the <a href="/docs/tutorial/js-table/">Building a Desktop Plugin - Showing a Table</a> tutorial.</p><p><code>createTablePlugin</code> creates a plugin that handles receiving data from the client and
displaying it in a table. The table handles selection of items, sorting, filtering and rendering a sidebar where more detailed information can be presented about the selected row.</p><p>The plugin expects to be able to subscribe to the <code>method</code> argument and receive single data objects. Each data object represents a row in the table.</p><p>An optional <code>resetMethod</code> argument can be provided that replaces the current rows with the data provided. This is useful when connecting to Flipper for this first time, or reconnecting to the client in an unknown state.</p><p>Since the <code>createTablePlugin</code> defines both the <code>plugin</code> and <code>Component</code> for the plugin in one go, making the result is most easily done by using <code>module.exports = createTablePlugin(....)</code> so that both are exported from the plugin package.</p><p>Valid options are:</p><ul><li><code>method: string</code> - the event that is sent from the corresponding client plugin and should be collected.</li><li><code>resetMethod?: string</code> - an event name, that, when sent from the client, should clear the current table.</li><li><code>columns: DataTableColumn</code> - a description of the columns to display (see <a href="#datatable">DataTable</a> in the &#x27;UI Components&#x27; page.</li><li><code>key?: string</code> - if set, the specified field of the incoming data will be treated as unique identifier. Receiving new data for existing rows will replace the existing rows. Without this property the table will only be appended.</li><li><code>onCopyRows?: (rows) =&gt; string</code> - a function that can be used to customize how records are copied to the clipboard. By default, they are <code>JSON.stringify</code>-ed.</li><li><code>buildRow?: (rawData) =&gt; row</code> - a function that can be used to preprocess the incoming data before it is handed off to the table.</li><li><code>renderSidebar?: (row) =&gt; React.Element</code> - a function that can be used to customize how the sidebar is rendered.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="batch">batch<a class="hash-link" href="#batch" title="Direct link to heading">â€‹</a></h3><p>Usage: <code>batch(() =&gt; { /* state updates */ })</code></p><p>Low-level utility to batch state updates to reduce the number of potential re-renders by React.</p><p>Wraps React&#x27;s <code>unstable_batchedUpdates</code>.
Event handlers provided by React or <code>flipper-plugin</code> already apply <code>batch</code> automatically, so using this utility is only recommended when updating plugin state in an asynchronous process.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="produce">produce<a class="hash-link" href="#produce" title="Direct link to heading">â€‹</a></h3><p>A convenience re-export of <code>produce</code> from <a href="https://immerjs.github.io/immer/docs/produce" target="_blank" rel="noopener noreferrer">Immer</a>.</p><p>The <code>update</code> method of the state atoms returned by <code>createState</code> automatically applies <code>produce</code> to its updater function.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="renderreactroot">renderReactRoot<a class="hash-link" href="#renderreactroot" title="Direct link to heading">â€‹</a></h3><p>Usage: <code>renderReactRoot(handler: (unmount: () =&gt; void) =&gt; React.ReactElement)</code></p><p>Renders an element outside the current DOM tree.</p><p>This is a low-level utility that can be used to render for example Modal dialogs.
The provided <code>handler</code> function should return the root element to be rendered.
Once the element can be removed from the DOM, the <code>unmount</code> callback should be called.</p><p>Example:</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">renderReactRoot</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">unmount</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">RequiredParametersDialog</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    onHide</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">unmount</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    uri</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">filteredQuery</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    requiredParameters</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">params</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    onSubmit</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">navigateTo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sleep">sleep<a class="hash-link" href="#sleep" title="Direct link to heading">â€‹</a></h3><p>Usage: <code>await sleep(1000)</code></p><p>Creates a promise that automatically resolves after the specified number of milliseconds.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="timeout">timeout<a class="hash-link" href="#timeout" title="Direct link to heading">â€‹</a></h3><p>Usage <code>await timeout(1000, promise, message?)</code></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="styled">styled<a class="hash-link" href="#styled" title="Direct link to heading">â€‹</a></h3><p>A convenience re-export of <code>styled</code> from <a href="https://emotion.sh/docs/styled" target="_blank" rel="noopener noreferrer">emotion</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="textcontent">textContent<a class="hash-link" href="#textcontent" title="Direct link to heading">â€‹</a></h3><p>Given a string or React element, returns a text representation of that element, that is suitable as plain text.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="path">path<a class="hash-link" href="#path" title="Direct link to heading">â€‹</a></h3><p>A set of utilizities to handle file paths. A subset of Node.js&#x27; <a href="https://nodejs.org/api/path.html" target="_blank" rel="noopener noreferrer">path</a>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="pathbasenamepath-ext"><code>path.basename(path[, ext])</code><a class="hash-link" href="#pathbasenamepath-ext" title="Direct link to heading">â€‹</a></h4><ul><li><code>path</code> {string}</li><li><code>ext</code> {string} An optional file extension</li><li>Returns: {string}</li></ul><p>The <code>path.basename()</code> method returns the last portion of a <code>path</code>, similar to
the Unix <code>basename</code> command. Trailing directory separators are ignored.</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">path</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">basename</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;/foo/bar/baz/asdf/quux.html&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Returns: &#x27;quux.html&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">path</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">basename</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;/foo/bar/baz/asdf/quux.html&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;.html&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Returns: &#x27;quux&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="pathextnamepath"><code>path.extname(path)</code><a class="hash-link" href="#pathextnamepath" title="Direct link to heading">â€‹</a></h4><ul><li><code>path</code> {string}</li><li>Returns: {string}</li></ul><p>The <code>path.extname()</code> method returns the extension of the <code>path</code>, from the last
occurrence of the <code>.</code> (period) character to end of string in the last portion of
the <code>path</code>. If there is no <code>.</code> in the last portion of the <code>path</code>, or if
there are no <code>.</code> characters other than the first character of
the basename of <code>path</code> (see <code>path.basename()</code>) , an empty string is returned.</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">path</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">extname</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;index.html&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Returns: &#x27;.html&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">path</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">extname</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;index.coffee.md&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Returns: &#x27;.md&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">path</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">extname</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;index.&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Returns: &#x27;.&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">path</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">extname</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;index&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Returns: &#x27;&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">path</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">extname</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;.index&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Returns: &#x27;&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">path</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">extname</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;.index.md&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Returns: &#x27;.md&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="pathjoinpaths"><code>path.join([...paths])</code><a class="hash-link" href="#pathjoinpaths" title="Direct link to heading">â€‹</a></h4><ul><li><code>...paths</code> {string} A sequence of path segments</li><li>Returns: {string}</li></ul><p>The <code>path.join()</code> method joins all given <code>path</code> segments together using the
platform-specific separator as a delimiter, then normalizes the resulting path.</p><p>Zero-length <code>path</code> segments are ignored. If the joined path string is a
zero-length string then <code>&#x27;.&#x27;</code> will be returned, representing the current
working directory.</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">path</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">join</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;/foo&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;bar&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;baz/asdf&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;quux&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;..&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Returns: &#x27;/foo/bar/baz/asdf&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="pathnormalizepath"><code>path.normalize(path)</code><a class="hash-link" href="#pathnormalizepath" title="Direct link to heading">â€‹</a></h4><ul><li><code>path</code> {string}</li><li>Returns: {string}</li></ul><p>The <code>path.normalize()</code> method normalizes the given <code>path</code>, resolving <code>&#x27;..&#x27;</code> and
<code>&#x27;.&#x27;</code> segments.</p><p>When multiple, sequential path segment separation characters are found (e.g.
<code>/</code>), they are replaced by a single
instance of <code>/</code>. Trailing separators are preserved.</p><p>If the <code>path</code> is a zero-length string, <code>&#x27;.&#x27;</code> is returned, representing the
current working directory.</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">path</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">normalize</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;/foo/bar//baz/asdf/quux/..&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Returns: &#x27;/foo/bar/baz/asdf&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="uuid">uuid<a class="hash-link" href="#uuid" title="Direct link to heading">â€‹</a></h3><p>Usage: <code>uuid()</code></p><p>Returns UUID V4.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="safestringify">safeStringify<a class="hash-link" href="#safestringify" title="Direct link to heading">â€‹</a></h3><p>Usage: <code>safeStringify(dataStructure)</code></p><p>Serialises the given data structure using <code>JSON.stringify</code>, but doesn&#x27;t throw if the processes failed, but rather returns a <code>&lt;unserializable ...&gt;</code> string.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="createcontrolledpromise">createControlledPromise<a class="hash-link" href="#createcontrolledpromise" title="Direct link to heading">â€‹</a></h3><p>Creates a promise and functions to resolve/reject it externally. Also provides its current state.</p><p>Returns:</p><div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// When the promise is pending</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">type</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Res</span><span class="token class-name operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token class-name constant" style="color:rgb(130, 170, 255)">T</span><span class="token class-name operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  promise</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">Promise</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token constant" style="color:rgb(130, 170, 255)">T</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  resolve</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">...</span><span class="token plain">res</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">T</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">extends</span><span class="token plain"> </span><span class="token class-name keyword" style="color:rgb(255, 203, 107);font-style:italic">void</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token constant" style="color:rgb(130, 170, 255)">T</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">void</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function-variable function" style="color:rgb(130, 170, 255)">reject</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">reason</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">unknown</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">void</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  state</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;pending&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  promiseVal</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">undefined</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  promise</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">Promise</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token constant" style="color:rgb(130, 170, 255)">T</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  resolve</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">...</span><span class="token plain">res</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">T</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">extends</span><span class="token plain"> </span><span class="token class-name keyword" style="color:rgb(255, 203, 107);font-style:italic">void</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token constant" style="color:rgb(130, 170, 255)">T</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">void</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function-variable function" style="color:rgb(130, 170, 255)">reject</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">reason</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">unknown</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">void</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  state</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;resolved&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Resolved value</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  promiseVal</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">T</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  promise</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">Promise</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token constant" style="color:rgb(130, 170, 255)">T</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  resolve</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">...</span><span class="token plain">res</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">T</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">extends</span><span class="token plain"> </span><span class="token class-name keyword" style="color:rgb(255, 203, 107);font-style:italic">void</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token constant" style="color:rgb(130, 170, 255)">T</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">void</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function-variable function" style="color:rgb(130, 170, 255)">reject</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">reason</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">unknown</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">void</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  state</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;rejected&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Rejection reason</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  promiseVal</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">unknown</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Usage:</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> controllerPromise </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">createControlledPromise</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">someService</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">on</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;event&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">val</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> controllerPromise</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">resolve</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">val</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword control-flow" style="font-style:italic">await</span><span class="token plain"> controllerPromise</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">promise</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="isatom">isAtom<a class="hash-link" href="#isatom" title="Direct link to heading">â€‹</a></h3><p>Usage: <code>isAtom(value)</code></p><p>Checks if value is an <a href="https://github.com/facebook/flipper/blob/566f7108c9efd8aefc8522af645bd0674fb91b20/desktop/flipper-plugin/src/state/atom.tsx#L30" target="_blank" rel="noopener noreferrer">Atom</a>. Returns boolean.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="testutils">TestUtils<a class="hash-link" href="#testutils" title="Direct link to heading">â€‹</a></h2><p>The object <code>TestUtils</code> as exposed from <code>flipper-plugin</code> exposes utilities to write unit tests for Sandy plugins.
Different utilities are exposed depending on whether you want to test a client or device plugin, and whether or not the component should be rendered or only the logic itself is going to be tested.
It is recommended to follow the <a href="/docs/tutorial/js-custom/">Tutorial</a> first, as it explains how unit tests should be setup.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="starting-a-plugin">Starting a plugin<a class="hash-link" href="#starting-a-plugin" title="Direct link to heading">â€‹</a></h3><p>Usage:</p><ul><li><code>const runner = TestUtils.startPlugin(pluginModule, options?)</code></li><li><code>const runner = TestUtils.renderPlugin(pluginModule, options?)</code></li><li><code>const runner = TestUtils.startDevicePlugin(devicePluginModule, options?)</code></li><li><code>const runner = TestUtils.renderDevicePlugin(devicePluginModule, options?)</code></li></ul><p>Starts a client plugin in a fully mocked environment, but without rendering support.
The pluginModule is an object that has a <code>plugin</code> (or <code>devicePlugin</code> and <code>supportsDevice</code>) and <code>Component</code> property.
Typically, it is invoked with <code>startPlugin(PluginUnderTest)</code>, where <code>PluginUnderTest</code> is loaded like <code>import * as PluginUnderTest from &quot;../index.tsx&quot;</code> (the path to the actual definition).
However, it doesn&#x27;t have to be loaded with an entire module, and a local object with the same signature can be constructed as well.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="startplugin-options">startPlugin options<a class="hash-link" href="#startplugin-options" title="Direct link to heading">â€‹</a></h4><p>The <code>options</code> argument is optional, but can specify the following fields:</p><ul><li><code>initialState</code>: Can be used to start the plugin in a certain state, rather than in the default state. <code>initialState</code> should be an object that specifies for all the state atoms that have the <code>persist</code> option set, their initial value. For example: <code>{ initialState: { rows: [&quot;hello&quot;, &quot;world&quot;]}}</code>, where <code>rows</code> matches the <code>persist</code> key of an atom.</li><li><code>isArchived: boolean</code>: Setting this flag, will set the <code>isArchived</code> on the mocked device as well. Set it if you want to test the behavior of your plugin for imported devices (see also <a href="#isarchived">Device.isArchived</a>). Defaults to <code>false</code>.</li><li><code>isBackgroundPlugin</code>: This makes sure the test runner emits life-cycle events in a way that is typical for background plugins. Defaults to <code>false</code>. The notable difference in behavior is that calling <code>.active()</code> on the test runner won&#x27;t trigger the <code>connect</code> event to be fired, nor the <code>.deactivate()</code> the <code>disconnect</code> event.</li><li><code>startUnactivated</code>: This does not activate the plugin; <code>connect</code> needs to be explicitly called. This can be used in case setting mock implementation for <code>onSend</code> is required to make sure Client plugin works as expected. Defaults to <code>false</code>.</li><li><code>GKs</code>: A string array of gatekeeper names for which <code>client.GK</code> will <code>true</code> inside the test. By default GKs are assumed to be disabled inside unit tests.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="the-test-runner-object">The test runner object<a class="hash-link" href="#the-test-runner-object" title="Direct link to heading">â€‹</a></h4><p><code>startPlugin</code> returns an object that can be used to inspect and interact with your plugin instance.
Again, see the tutorial how to interact with this object in general.
The test runner is a bag full of utilities, but typically it is fine to just destructure the utilities relevant for the test.
Exposed members:</p><ul><li><code>instance</code>: The object (public API) returned from your plugin definition. You will typically use this in most tests, either to trigger updates or to inspect the current state of the plugin.</li><li><code>exportState()</code>: Grabs the current state of all <code>persist</code> enabled state atoms. The object format returned here is the same as in the <code>initialState</code> option.</li><li><code>activate()</code>: Emulate the <code>onActivate</code> event. By default, <code>startPlugin</code> already starts the plugin in activated state and calling <code>activate</code> to test the <code>onActivate</code> event should be preceded by a <code>deactivate()</code> call first.</li><li><code>deactivate()</code>: Emulates a user navigating away from the plugin.</li><li><code>destroy()</code>: Emulates the plugin being cleaned up, for example because the plugin is disabled by the user, or because the device / client has disconnected. After calling <code>destroy</code> the current <code>runner</code> is unusable.</li><li><code>triggerDeepLink(payload)</code>: Emulates a deepLink being triggered and fires the <code>onDeepLink</code> event.</li><li><code>triggerMenuEntry(label)</code>: Emulates the user clicking a menu entry in the Flipper main menu.</li><li><code>flipperLib</code>: An object that exposed <code>jest.fn()</code> mocks for all built-in Flipper APIs that can be called by your plugin. So, assertions can be made that the plugin did actually invoke those methods. For example: <code>expect(runner.flipperLib.createPaste).toBeCalledWith(&quot;test message&quot;)</code>. Currently supported mocks: <code>createPaste</code>, <code>enableMenuEntries</code>.</li></ul><p>The following members are available when using the <code>render...</code> variant rather than the <code>start...</code> variant:</p><ul><li><code>renderer</code>: This object can be used to query the DOM and further interact with it. It is provided by react-testing-library, and further documented in the <a href="https://testing-library.com/docs/react-testing-library/api#render-result" target="_blank" rel="noopener noreferrer">render Result</a> page.</li><li><code>act</code>: Use this function to wrap interactions with the plugin under test into a transaction, after which the DOM updates will be flushed by React. See also the React.js <a href="https://reactjs.org/docs/test-utils.html#act" target="_blank" rel="noopener noreferrer">act()</a> documentation.</li></ul><p>The following members are only available for Client plugins:</p><ul><li><code>sendEvent(event, params)</code>: Emulates an event being sent by the client plugin. Will trigger the corresponding <code>onMessage</code> handler in the plugin.</li><li><code>sendEvents({ method: string, params: object}[])</code>: Like <code>sendEvent</code>, but sends multiple events at once.</li><li><code>onSend</code>: A <code>jest.fn()</code> that can be used to assert that <code>client.send()</code> was called by the plugin under test. For example, <code>expect(runner.onSend).toBeCalledWith(&#x27;currentLogs</code>, { since: 0})`.</li><li><code>connect()</code>: Triggers the <code>onConnect()</code> event. (For non-background plugins <code>activate()</code> could as well be used for this).</li><li><code>disconnect()</code>: Triggers the <code>onDisconnect()</code> event. (For non-background plugins <code>deactivate()</code> could as well be used for this).</li></ul><p>The following members are only available for Device plugins:</p><ul><li><code>sendLogEntry(logEntry)</code>: Emulates a log message arriving from the device. Triggers the <code>client.device.onLogEntry</code> listener.</li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/flipper/blob/main/website/../docs/extending/flipper-plugin.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/extending/sandy-migration/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Migrating a Plugin to Sandy</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/extending/styling-components/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Styling Components</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#properties" class="table-of-contents__link toc-highlight">Properties</a></li><li><a href="#events" class="table-of-contents__link toc-highlight">Events</a></li><li><a href="#methods" class="table-of-contents__link toc-highlight">Methods</a></li><li><a href="#devicepluginclient" class="table-of-contents__link toc-highlight">DevicePluginClient</a><ul><li><a href="#properties-1" class="table-of-contents__link toc-highlight">Properties</a></li><li><a href="#events-1" class="table-of-contents__link toc-highlight">Events</a></li><li><a href="#methods-1" class="table-of-contents__link toc-highlight">Methods</a></li></ul></li><li><a href="#device-1" class="table-of-contents__link toc-highlight">Device</a><ul><li><a href="#properties-2" class="table-of-contents__link toc-highlight">Properties</a></li><li><a href="#events-2" class="table-of-contents__link toc-highlight">Events</a></li></ul></li><li><a href="#state-management" class="table-of-contents__link toc-highlight">State Management</a><ul><li><a href="#methods-2" class="table-of-contents__link toc-highlight">Methods</a></li></ul></li><li><a href="#react-hooks" class="table-of-contents__link toc-highlight">React Hooks</a><ul><li><a href="#methods-3" class="table-of-contents__link toc-highlight">Methods</a></li></ul></li><li><a href="#ui-components" class="table-of-contents__link toc-highlight">UI components</a><ul><li><a href="#layout" class="table-of-contents__link toc-highlight">Layout.*</a></li><li><a href="#highlightcontext" class="table-of-contents__link toc-highlight">HighlightContext</a></li><li><a href="#highlightprovider" class="table-of-contents__link toc-highlight">HighlightProvider</a></li><li><a href="#usehighlighter" class="table-of-contents__link toc-highlight">useHighlighter</a></li><li><a href="#datatable" class="table-of-contents__link toc-highlight">DataTable</a></li><li><a href="#dataformatter" class="table-of-contents__link toc-highlight">DataFormatter</a></li><li><a href="#datainspector" class="table-of-contents__link toc-highlight">DataInspector</a></li><li><a href="#datadescription" class="table-of-contents__link toc-highlight">DataDescription</a></li><li><a href="#markertimeline" class="table-of-contents__link toc-highlight">MarkerTimeline</a></li><li><a href="#elementsinspector" class="table-of-contents__link toc-highlight">ElementsInspector</a></li><li><a href="#elementattribute" class="table-of-contents__link toc-highlight">ElementAttribute</a></li><li><a href="#elementdata" class="table-of-contents__link toc-highlight">ElementData</a></li><li><a href="#elementextrainfo" class="table-of-contents__link toc-highlight">ElementExtraInfo</a></li><li><a href="#elementid" class="table-of-contents__link toc-highlight">ElementID</a></li><li><a href="#elementsearchresultset" class="table-of-contents__link toc-highlight">ElementSearchResultSet</a></li><li><a href="#elementsinspectorelement" class="table-of-contents__link toc-highlight">ElementsInspectorElement</a></li><li><a href="#elementsinspectorprops" class="table-of-contents__link toc-highlight">ElementsInspectorProps</a></li><li><a href="#masterdetail" class="table-of-contents__link toc-highlight">MasterDetail</a></li><li><a href="#panel" class="table-of-contents__link toc-highlight">Panel</a></li><li><a href="#tabs" class="table-of-contents__link toc-highlight">Tabs</a></li><li><a href="#tab" class="table-of-contents__link toc-highlight">Tab</a></li><li><a href="#toolbar" class="table-of-contents__link toc-highlight">Toolbar</a></li><li><a href="#codeblock" class="table-of-contents__link toc-highlight">CodeBlock</a></li><li><a href="#datalist" class="table-of-contents__link toc-highlight">DataList</a></li><li><a href="#dialog" class="table-of-contents__link toc-highlight">Dialog</a></li><li><a href="#spinner" class="table-of-contents__link toc-highlight">Spinner</a></li><li><a href="#nux" class="table-of-contents__link toc-highlight">NUX</a></li><li><a href="#fileselector" class="table-of-contents__link toc-highlight">FileSelector</a></li><li><a href="#detailsidebar" class="table-of-contents__link toc-highlight">DetailSidebar</a></li><li><a href="#tracked" class="table-of-contents__link toc-highlight">Tracked</a></li><li><a href="#trackingscope" class="table-of-contents__link toc-highlight">TrackingScope</a></li><li><a href="#withtrackingscope" class="table-of-contents__link toc-highlight">withTrackingScope</a></li><li><a href="#theme-object" class="table-of-contents__link toc-highlight">theme object</a></li></ul></li><li><a href="#utilities" class="table-of-contents__link toc-highlight">Utilities</a><ul><li><a href="#getflipperlib" class="table-of-contents__link toc-highlight">getFlipperLib</a></li><li><a href="#createtableplugin" class="table-of-contents__link toc-highlight">createTablePlugin</a></li><li><a href="#batch" class="table-of-contents__link toc-highlight">batch</a></li><li><a href="#produce" class="table-of-contents__link toc-highlight">produce</a></li><li><a href="#renderreactroot" class="table-of-contents__link toc-highlight">renderReactRoot</a></li><li><a href="#sleep" class="table-of-contents__link toc-highlight">sleep</a></li><li><a href="#timeout" class="table-of-contents__link toc-highlight">timeout</a></li><li><a href="#styled" class="table-of-contents__link toc-highlight">styled</a></li><li><a href="#textcontent" class="table-of-contents__link toc-highlight">textContent</a></li><li><a href="#path" class="table-of-contents__link toc-highlight">path</a></li><li><a href="#uuid" class="table-of-contents__link toc-highlight">uuid</a></li><li><a href="#safestringify" class="table-of-contents__link toc-highlight">safeStringify</a></li><li><a href="#createcontrolledpromise" class="table-of-contents__link toc-highlight">createControlledPromise</a></li><li><a href="#isatom" class="table-of-contents__link toc-highlight">isAtom</a></li></ul></li><li><a href="#testutils" class="table-of-contents__link toc-highlight">TestUtils</a><ul><li><a href="#starting-a-plugin" class="table-of-contents__link toc-highlight">Starting a plugin</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Learn</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started/">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/tutorial/intro/">Plugin Creation Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Plugins</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/features/">Core Plugins</a></li><li class="footer__item"><a href="https://www.npmjs.com/search?q=keywords:flipper-plugin" target="_blank" rel="noopener noreferrer" class="footer__link-item">Community Plugins<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Legal</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://opensource.facebook.com/legal/privacy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/terms/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://twitter.com/flipper_fb" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/facebook/flipper" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/img/mascot.png" alt="Flipper Mascot" class="themedImage_ToTc themedImage--light_HNdA footer__logo"><img src="/img/mascot.png" alt="Flipper Mascot" class="themedImage_ToTc themedImage--dark_i4oU footer__logo"></div><div class="footer__copyright">Copyright Â© 2023 Meta Platforms, Inc</div></div></div></footer></div>
<script src="/assets/js/runtime~main.dcc40e1b.js"></script>
<script src="/assets/js/main.faec66e5.js"></script>
</body>
</html>