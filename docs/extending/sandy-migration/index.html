<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-extending/sandy-migration" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">Migrating a Plugin to Sandy | Flipper</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://fbflipper.com/docs/extending/sandy-migration/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Migrating a Plugin to Sandy | Flipper"><meta data-rh="true" name="description" content="Migrating a plugin to the new Sandy plugin architecture consists of three steps:"><meta data-rh="true" property="og:description" content="Migrating a plugin to the new Sandy plugin architecture consists of three steps:"><link data-rh="true" rel="icon" href="/img/icon.png"><link data-rh="true" rel="canonical" href="https://fbflipper.com/docs/extending/sandy-migration/"><link data-rh="true" rel="alternate" href="https://fbflipper.com/docs/extending/sandy-migration/" hreflang="en"><link data-rh="true" rel="alternate" href="https://fbflipper.com/docs/extending/sandy-migration/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://OFCNCOG2CU-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Flipper RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Flipper Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="Flipper" href="/opensearch.xml">




<script src="https://buttons.github.io/buttons.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
<script src="https://fbflipper.com/js/code-blocks-buttons.js"></script>
<script src="https://fbflipper.com/js/google-analytics.js"></script><link rel="stylesheet" href="/assets/css/styles.ad025189.css">
<link rel="preload" href="/assets/js/runtime~main.3d185fb0.js" as="script">
<link rel="preload" href="/assets/js/main.f8738382.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script>

<div style="display: none; text-align: center; background-color: white; color: black;" id="internaldocs-banner"></div><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:#20232a;color:#fff" role="banner"><div class="content_knG7 announcementBarContent_xLdY">Support Ukraine ðŸ‡ºðŸ‡¦ <a target="_blank" rel="noopener noreferrer" href="https://opensource.fb.com/support-ukraine"> Help Provide Humanitarian Aid to Ukraine</a>.</div></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/icon.png" alt="Flipper Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/icon.png" alt="Flipper Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Flipper</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/features/">Features</a><a class="navbar__item navbar__link" href="/docs/getting-started/">Setup</a><a class="navbar__item navbar__link" href="/docs/tutorial/intro/">Creating Plugins</a><a class="navbar__item navbar__link" href="/docs/internals/">Under the Hood</a><a class="navbar__item navbar__link" href="/blog/">Blog</a><a href="https://github.com/facebook/flipper" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar-github-link" aria-label="GitHub repository"></a><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/features/">Features</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/getting-started/">Setup</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/tutorial/intro/">Creating Plugins</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial/intro/">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial/ios/">Building an iOS Plugin</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial/android/">Building an Android Plugin</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial/react-native/">Building a React Native Plugin</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial/javascript/">Building a JavaScript (Browser) Plugin</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/tutorial/js-setup/">Building a Desktop Plugin</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial/js-publishing/">Publishing Your Plugin</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/docs/extending/dev-setup/">Development Workflow</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/extending/dev-setup/">Development Setup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/extending/loading-custom-plugins/">Dynamically Loading Plugins</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/extending/desktop-plugin-structure/">Plugin structure</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/extending/testing/">Testing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/extending/debugging/">Debugging</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/extending/plugin-distribution/">Plugin Distribution</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/extending/sandy-migration/">Migrating a Plugin to Sandy</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/extending/flipper-plugin/">Desktop Plugin APIs</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/extending/create-plugin/">Client Plugin APIs</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/internals/">Under the Hood</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Creating Plugins</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Development Workflow</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Migrating a Plugin to Sandy</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Migrating a Plugin to Sandy</h1></header><p>Migrating a plugin to the new Sandy plugin architecture consists of three steps:</p><ol><li>Enabling Sandy for a plugin.</li><li>Update state and connection management to use the Sandy APIs.</li><li>Update the UI to use Sandy / Antd components only.</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="opting-in-to-sandy">Opting in to Sandy<a href="#opting-in-to-sandy" class="hash-link" aria-label="Direct link to Opting in to Sandy" title="Direct link to Opting in to Sandy">â€‹</a></h2><p>Converting a Flipper plugin to use Sandy is best done by running Flipper from source.</p><p>For open-source users, clone the repository and run <code>yarn install</code> in the <code>desktop</code> folder.</p><p>Enabling Sandy for a plugin requires two steps:</p><ol><li>The <code>flipper-plugin</code> should be added as peer dependency to the <code>package.json</code> of the plugin:</li></ol><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token property">&quot;peerDependencies&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;flipper-plugin&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;*&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>Make sure to run <code>yarn install</code> again in the <code>desktop/</code> folder. Sandy is now enabled for this plugin&quot; the plugin has to be restructured to the new architecture, which you&#x27;ll be able to do in the next step.</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="using-sandy-for-state-and-connection-management">Using Sandy for state and connection management<a href="#using-sandy-for-state-and-connection-management" class="hash-link" aria-label="Direct link to Using Sandy for state and connection management" title="Direct link to Using Sandy for state and connection management">â€‹</a></h2><p>The goal of this step is to use and leave the plugin UI largely as is but convert state and connection management to use the new Sandy APIs as exposed through the <code>flipper-plugin</code> package.</p><p>Compared to &#x27;classic&#x27; plugins, there are a few fundamental differences when it comes to the plugin structure of Sandy plugins. A class extending from <code>FlipperPlugin</code> that is exported as <code>default</code> is <em>no longer</em> used to define a plugin.</p><p>Instead, a plugin definition consists of two parts:</p><ol><li>A definition of the state and logic of the plugin that is exported under the name <code>plugin</code>: <code>export function plugin(client: PluginClient&lt;Events, Methods&gt;) { ... }</code>. Most of the state and all connection logic will move here.</li><li>A definition of the root of the UI is exported under the name <code>Component</code>: <code>export function Component() { ... }</code></li></ol><p>There are a few conceptual changes that are important to understand, as they are different compared to classic plugins:</p><ul><li><p>The <code>plugin</code> function is called exactly once when a plugin is set up for an application. This means that all state that is created inside the <code>plugin</code> definition is kept as long as the app is connected, even when the user is navigating away.
It used to be necessary to use <code>persistedState</code> for this kind of state, but that is no longer the case.</p></li><li><p>In contrast, the <code>Component</code> component is mounted whenever the user <em>opens</em> the plugin, so any state stored locally in that React component will be lost if the user navigates away. It&#x27;s recommended avoiding this and, instead, store state (including selection) in the <code>plugin</code> definition, using the <code>createState</code> abstraction.</p></li></ul><p>The relation between <code>plugin</code>, its parameter <code>client</code>, and how to use it in your <code>Component</code> definition is documented in detail in the <a href="/docs/tutorial/js-custom/#the-plugin-declaration">Plugin Declaration section</a>. Please read it before continuing as it explains in detail how to manage state, handle receiving and sending data, and testing.</p><p>The full set of available APIs on <code>client</code> is documented in the <a href="/docs/extending/flipper-plugin/#pluginclient">Desktop Plugin API</a> page.</p><p>This step is completed if the plugin follows the next <code>plugin</code> / <code>component</code> structure and is working again. Make sure to test extensively!</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tips">Tips<a href="#tips" class="hash-link" aria-label="Direct link to Tips" title="Direct link to Tips">â€‹</a></h3><ul><li>To quickly verify the plugin compiles, the simplest way is to keep <code>yarn tsc -w</code> running in the <code>desktop</code> folder.</li><li>Similarly <code>yarn watch</code> can be used to run the unit tests in watch mode. Use the <code>p</code> key to filter for your specific plugin if <code>jest</code> doesn&#x27;t do so automatically.</li><li>For an example of migrating the network plugin to use Sandy APIs, see diff <a href="https://www.internalfb.com/diff/D24108772" target="_blank" rel="noopener noreferrer">D24108772</a> / <a href="https://github.com/facebook/flipper/commit/fdde2761ef054e44f399c846a2eae6baba03861e" target="_blank" rel="noopener noreferrer">Github commit</a>.</li><li>For an example of migrating the example plugin to use Sandy APIs, see diff <a href="https://www.internalfb.com/diff/D22308265" target="_blank" rel="noopener noreferrer">D22308265</a> / <a href="https://github.com/facebook/flipper/commit/babc88e472612c66901d21d289bd217ef28ee385#diff-a145be72bb13a4675dcc8cbac5e55abcd9a542cc92f5c781bd7d3749f13676fc" target="_blank" rel="noopener noreferrer">Github commit</a>.</li><li>Other plugins that can be checked for inspiration are Logs and Network plugins.</li><li>These steps typically don&#x27;t change the UI much or touch other files than <code>index.tsx</code>. Typically, the root component needs to be changed, but most other components can remain as is. However, if a ManagedTable is used (see the next section), it might be easier to already convert the table in this step.</li><li>Sandy has first class support for unit testing your plugin and mocking device interactions. Please do set up unit tests per documentation linked above!</li><li>If the original plugin definition contained <code>state</code>, it is recommended to create one new state atoms (<code>createState</code>) per field in the original <code>state</code>, rather than having one big atom.</li><li>If the original plugin definition contained <code>persistedState</code>, it is recommended to create one new state atoms (<code>createState</code>) per field in the original <code>state</code>, rather than having one big atom. By setting the <code>persist</code> <a href="/docs/extending/flipper-plugin/#options">option</a> of the state, you can make sure this piece of state becomes part of the import / export functionality of Flipper. Which is important if the data stored here is relevant for bug reports.</li><li>For deeply nested state updates, using <code>state.update</code> is often simpler than using <code>state.set</code>, as it uses <a href="https://immerjs.github.io/immer/" target="_blank" rel="noopener noreferrer">Immer</a> under the hood to make immutable state updates straight forward.</li><li>For the same reason, you don&#x27;t need to shallowly clone your state anymore, as long as <code>state.update</code> is used for state updates.</li><li>When dealing a lot with promises, using <a href="https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Asynchronous/Async_await" target="_blank" rel="noopener noreferrer"><code>async</code> / <code>await</code></a> is usually simpler.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="migration-table">Migration table<a href="#migration-table" class="hash-link" aria-label="Direct link to Migration table" title="Direct link to Migration table">â€‹</a></h3><p>Some abstractions that used to be static methods on <code>FlipperPlugin</code> are now exposed from the <code>client</code> object. Following are a few examples:</p><table><thead><tr><th align="left">Old</th><th align="left">New</th></tr></thead><tbody><tr><td align="left"><code>persistedState</code></td><td align="left">Use <code>createState</code> and set the <code>persist</code> option</td></tr><tr><td align="left"><code>persistedStateReducer</code></td><td align="left">Create message handlers and update the state objects directly</td></tr><tr><td align="left"><code>exportPersistedState</code></td><td align="left">Use the <code>client.onExport</code> hook</td></tr><tr><td align="left"><code>getActiveNotifications</code></td><td align="left">Use <code>client.showNotification</code> for persistent notifications, or <code>message</code> / <code>notification</code> from <code>antd</code> for one-off notifications.</td></tr><tr><td align="left"><code>createTablePlugin</code></td><td align="left">TBD, so these conversions can be skipped for now</td></tr><tr><td align="left"><code>init</code></td><td align="left"><code>client.onReady</code></td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="using-sandy--antdesign-to-organise-the-plugin-ui">Using Sandy / Ant.design to organise the plugin UI<a href="#using-sandy--antdesign-to-organise-the-plugin-ui" class="hash-link" aria-label="Direct link to Using Sandy / Ant.design to organise the plugin UI" title="Direct link to Using Sandy / Ant.design to organise the plugin UI">â€‹</a></h2><p>The goal of this step is to update the UI of the plugin to use Sandy / Ant Design components.
These will provide a more consistent user experience, usually provide better UX and they support dark mode!
Roughly speaking this typically involves replacing all imported components with their modern counterpart.</p><p>For Sandy plugins, components can be found here:</p><ul><li>Interactive data displaying components are exposed from <code>flipper-plugin</code>: <code>DataTable</code> (for tables), <code>DataInspector</code> (for JSON trees) and <code>ElementInspector</code> (for element trees).</li><li><code>flipper-plugin</code> also provides the primitives to organise the <code>Layout</code> of the plugin.</li><li>Practically all other, more generic components are provided by <a href="https://ant.design/components/overview/" target="_blank" rel="noopener noreferrer">Ant Design</a>, a proven mature open source component library, which is much richer than the components that are offered from <code>flipper</code>.</li></ul><p>In Sandy, the layout is typically built by using a combination of the following:</p><ul><li><code>Layout.Top</code> (or <code>.Right</code>, <code>.Left</code>, <code>.Bottom</code>), which divides all available space in a fixed and dynamic section</li><li><code>Layout.Scrollable</code>, which takes all available space and provides scrollbars if its content is still greater,</li><li><code>Layout.Container</code> which organizes paddings, borders and spacing between elements etc.</li></ul><p>Generally, it&#x27;s recommended not to use <code>margins</code>; use padding and <code>gap</code> instead.</p><p>Ideally, use <code>theme.spacing</code> to get standard numbers for margins and paddings instead of hard-coded numbers. This will help with achieving consistency in look and feel.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="design-resources">Design resources<a href="#design-resources" class="hash-link" aria-label="Direct link to Design resources" title="Direct link to Design resources">â€‹</a></h3><p>There are three important resources to check for documentation on the components available:</p><ol><li><a href="/docs/extending/style-guide/">Flipper style guide</a> - a general overview of the Flipper design system that demonstrates colors, typography and creating layouts including some examples.</li><li><a href="https://ant.design/components/overview/" target="_blank" rel="noopener noreferrer">Ant Design component overview</a></li><li><a href="/docs/extending/flipper-plugin/#ui-components">API reference</a> documentation for the components provided by <code>flipper-plugin</code></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="old-and-new-components">Old and new components<a href="#old-and-new-components" class="hash-link" aria-label="Direct link to Old and new components" title="Direct link to Old and new components">â€‹</a></h3><p>For conversion, the following table maps the old components to the new ones:</p><table><thead><tr><th align="left">Old <code>flipper</code> component</th><th align="left">New component</th><th align="left">Providing package</th><th align="left">Notes</th></tr></thead><tbody><tr><td align="left"><code>DetailsSidebar</code></td><td align="left"><code>DetailsSidebar</code></td><td align="left"><code>flipper-plugin</code></td><td align="left">as-is</td></tr><tr><td align="left"><code>Sidebar</code></td><td align="left"><code>Layout.Top</code> (or <code>.Right</code>, <code>.Left</code>, <code>.Bottom</code>)</td><td align="left"><code>flipper-plugin</code></td><td align="left">Set the <code>resizable</code> flag to allow the user to resize the pane.</td></tr><tr><td align="left"><code>FlexColumn</code> / <code>Pane</code> / <code>View</code></td><td align="left"><code>Layout.Container</code></td><td align="left"><code>flipper-plugin</code></td><td align="left">Use the <code>gap</code> property to provide some spacing between the children!</td></tr><tr><td align="left"><code>FlexRow</code></td><td align="left"><code>Layout.Horizontal</code></td><td align="left"><code>flipper-plugin</code></td><td align="left">Use the <code>gap</code> property to provide some spacing between the children!</td></tr><tr><td align="left"><code>Scrollable</code></td><td align="left"><code>Layout.ScrollContainer</code></td><td align="left"><code>flipper-plugin</code></td><td align="left"></td></tr><tr><td align="left"><code>Link</code></td><td align="left"><code>Typography.Link</code></td><td align="left"><code>antd</code></td><td align="left"></td></tr><tr><td align="left"><code>Text</code> / <code>Heading</code></td><td align="left"><code>Typography.Text</code> / <code>Typography.Title</code></td><td align="left"><code>antd</code></td><td align="left"></td></tr><tr><td align="left"><code>Button</code></td><td align="left"><code>Button</code></td><td align="left"><code>antd</code></td><td align="left"></td></tr><tr><td align="left"><code>Glyph</code></td><td align="left"><code>Icon</code></td><td align="left"><code>antd</code></td><td align="left"></td></tr><tr><td align="left"><code>ManagedDataTable</code></td><td align="left"><code>DataTable</code></td><td align="left"><code>flipper-plugin</code></td><td align="left">Requires state to be provided by a <a href="/docs/extending/flipper-plugin/#createdatasource"><code>createDataSource</code></a></td></tr><tr><td align="left"><code>ManagedDataInspector</code> / <code>DataInspector</code></td><td align="left"><code>DataInspector</code></td><td align="left"><code>flipper-plugin</code></td><td align="left"></td></tr><tr><td align="left"><code>ManagedElementInspector</code> / <code>ElementInspector</code></td><td align="left"><code>ElementInspector</code></td><td align="left"><code>flipper-plugin</code></td><td align="left"></td></tr><tr><td align="left"><code>Panel</code></td><td align="left"><code>Panel</code></td><td align="left"><code>flipper-plugin</code></td><td align="left"></td></tr><tr><td align="left"><code>Tabs</code> / <code>Tab</code></td><td align="left"><code>Tabs</code> / <code>Tab</code></td><td align="left">`flipper-plugin</td><td align="left">Note that <code>Tab</code>&#x27;s <code>title</code> property is now called <code>tab</code>.</td></tr></tbody></table><p>Most other components, such as <code>select</code> elements, tabs, and date-pickers can all be found in the Ant documentation.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="theming--custom-styled-components">Theming &amp; custom styled components<a href="#theming--custom-styled-components" class="hash-link" aria-label="Direct link to Theming &amp; custom styled components" title="Direct link to Theming &amp; custom styled components">â€‹</a></h3><p>Creating your own components / styling using <code>styled</code> is still supported.
But ideally, you should need custom styled components a lot less!</p><p>Since Sandy plugins are expected to support dark mode, (use the settings pane to quickly toggle), it&#x27;s recommended not to use hard-coded colors. Instead, use one of the semantic colors that are provided through the <code>theme</code> object that can be imported from <code>flipper-plugin</code>.</p><p>Ideally, there should be no hard-coded colors anymore either, and little need to use <code>width: 100%</code> / <code>height: 100%</code> anywhere, as needing those typically signals a layout issue.</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Tip</div><div class="admonitionContent_S0QG"><p>It&#x27;s recommended to keep components as much as possible outside the entry file, as components defined outside the index.tsx file will benefit from fast refresh.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="wrapping-up">Wrapping up<a href="#wrapping-up" class="hash-link" aria-label="Direct link to Wrapping up" title="Direct link to Wrapping up">â€‹</a></h3><p>This step of the process is completed as soon as there are no imports from the <code>flipper</code> package anymore. Don&#x27;t forget to remove <code>flipper</code> from the <code>peerDependencies</code> in the <code>package.json</code> section if present.</p><p>If you have any questions, feel free to reach out to the <a href="https://fb.workplace.com/groups/flippersupport" target="_blank" rel="noopener noreferrer">Flipper Support</a> Workplace group.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/flipper/blob/main/website/../docs/extending/sandy-migration.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/extending/plugin-distribution/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Plugin Distribution</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/extending/flipper-plugin/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Desktop Plugin API</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#opting-in-to-sandy" class="table-of-contents__link toc-highlight">Opting in to Sandy</a></li><li><a href="#using-sandy-for-state-and-connection-management" class="table-of-contents__link toc-highlight">Using Sandy for state and connection management</a><ul><li><a href="#tips" class="table-of-contents__link toc-highlight">Tips</a></li><li><a href="#migration-table" class="table-of-contents__link toc-highlight">Migration table</a></li></ul></li><li><a href="#using-sandy--antdesign-to-organise-the-plugin-ui" class="table-of-contents__link toc-highlight">Using Sandy / Ant.design to organise the plugin UI</a><ul><li><a href="#design-resources" class="table-of-contents__link toc-highlight">Design resources</a></li><li><a href="#old-and-new-components" class="table-of-contents__link toc-highlight">Old and new components</a></li><li><a href="#theming--custom-styled-components" class="table-of-contents__link toc-highlight">Theming &amp; custom styled components</a></li><li><a href="#wrapping-up" class="table-of-contents__link toc-highlight">Wrapping up</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Learn</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started/">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/tutorial/intro/">Plugin Creation Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Plugins</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/features/">Core Plugins</a></li><li class="footer__item"><a href="https://www.npmjs.com/search?q=keywords:flipper-plugin" target="_blank" rel="noopener noreferrer" class="footer__link-item">Community Plugins<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Legal</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://opensource.facebook.com/legal/privacy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/terms/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://twitter.com/flipper_fb" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/facebook/flipper" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/img/mascot.png" alt="Flipper Mascot" class="themedImage_ToTc themedImage--light_HNdA footer__logo"><img src="/img/mascot.png" alt="Flipper Mascot" class="themedImage_ToTc themedImage--dark_i4oU footer__logo"></div><div class="footer__copyright">Copyright Â© 2025 Meta Platforms, Inc</div></div></div></footer></div>
<script src="/assets/js/runtime~main.3d185fb0.js"></script>
<script src="/assets/js/main.f8738382.js"></script>
</body>
</html>