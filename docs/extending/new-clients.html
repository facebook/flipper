<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Implementing a Flipper Client · Flipper</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="In the GitHub repo, you&#x27;ll find Flipper clients for Android, iOS and C++ code, but there&#x27;s nothing to stop you from writing a FlipperClient for another device or OS."/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Implementing a Flipper Client · Flipper"/><meta property="og:type" content="website"/><meta property="og:url" content="https://fbflipper.com//index.html"/><meta property="og:description" content="In the GitHub repo, you&#x27;ll find Flipper clients for Android, iOS and C++ code, but there&#x27;s nothing to stop you from writing a FlipperClient for another device or OS."/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/img/icon.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/js/code-blocks-buttons.js"></script><script type="text/javascript" src="/js/google-analytics.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/icon.png" alt="Flipper"/><h2 class="headerTitleWithLogo">Flipper</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/docs/features/index.html" target="_self">Features</a></li><li class=""><a href="/docs/getting-started/index.html" target="_self">Setup</a></li><li class="siteNavGroupActive"><a href="/docs/extending/index.html" target="_self">Extending</a></li><li class=""><a href="https://github.com/facebook/flipper" target="_self">GitHub</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Other Platforms</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Extending Flipper</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/extending/index.html">Clients and Plugins</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Tutorial</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/tutorial/intro.html">Intro</a></li><li class="navListItem"><a class="navItem" href="/docs/tutorial/ios.html">Building an iOS Plugin</a></li><li class="navListItem"><a class="navItem" href="/docs/tutorial/android.html">Building an Android Plugin</a></li><li class="navListItem"><a class="navItem" href="/docs/tutorial/react-native.html">Building a React Native Plugin</a></li><li class="navListItem"><a class="navItem" href="/docs/tutorial/js-setup.html">Building a desktop plugin</a></li><li class="navListItem"><a class="navItem" href="/docs/tutorial/js-table.html">Showing a table</a></li><li class="navListItem"><a class="navItem" href="/docs/tutorial/js-custom.html">Custom UI</a></li><li class="navListItem"><a class="navItem" href="/docs/tutorial/js-publishing.html">Publishing</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Plugin Development</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/extending/js-setup.html">JavaScript Plugin Definition</a></li><li class="navListItem"><a class="navItem" href="/docs/extending/js-plugin-api.html">JavaScript Plugin API</a></li><li class="navListItem"><a class="navItem" href="/docs/extending/create-table-plugin.html">Create Table Plugin</a></li><li class="navListItem"><a class="navItem" href="/docs/extending/ui-components.html">UI Components</a></li><li class="navListItem"><a class="navItem" href="/docs/extending/styling-components.html">Styling Components</a></li><li class="navListItem"><a class="navItem" href="/docs/extending/search-and-filter.html">Searching and Filtering</a></li><li class="navListItem"><a class="navItem" href="/docs/extending/create-plugin.html">Client Plugin API</a></li><li class="navListItem"><a class="navItem" href="/docs/extending/client-plugin-lifecycle.html">Client Plugin Lifecycle</a></li><li class="navListItem"><a class="navItem" href="/docs/extending/send-data.html">Providing Data to Plugins</a></li><li class="navListItem"><a class="navItem" href="/docs/extending/error-handling.html">Error Handling</a></li><li class="navListItem"><a class="navItem" href="/docs/extending/testing.html">Testing</a></li><li class="navListItem"><a class="navItem" href="/docs/extending/debugging.html">Debugging</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Other Platforms</h3><ul class=""><li class="navListItem navListItemActive"><a class="navItem" href="/docs/extending/new-clients.html">Implementing a Flipper Client</a></li><li class="navListItem"><a class="navItem" href="/docs/extending/establishing-a-connection.html">Secure Communication</a></li><li class="navListItem"><a class="navItem" href="/docs/extending/supporting-layout.html">Implementing Layout Inspection</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Internals</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/extending/arch.html">Architecture</a></li><li class="navListItem"><a class="navItem" href="/docs/extending/layout-inspector.html">Extending Layout Inspector</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/facebook/flipper/blob/master/docs/extending/new-clients.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 id="__docusaurus" class="postHeaderTitle">Implementing a Flipper Client</h1></header><article><div><span><p>In the GitHub repo, you'll find Flipper clients for Android, iOS and C++ code, but there's nothing to stop you from writing a FlipperClient for another device or OS.</p>
<p>Flipper clients communicate with the Flipper desktop app using JSON RPC messages over an <a href="http://rsocket.io/">RSocket</a> connection.</p>
<p>This page documents the API, and you can use <a href="https://github.com/facebook/flipper/blob/master/xplat/Flipper/FlipperConnectionManagerImpl.cpp">FlipperConnectionManagerImpl.cpp</a> for reference.</p>
<h2><a class="anchor" aria-hidden="true" id="establishing-a-connection"></a><a href="#establishing-a-connection" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Establishing a connection</h2>
<p>Start by connecting to the Flipper server running within the desktop app. Connecting to the server registers your application with Flipper and enables plugins to interact with it. As the Flipper desktop has a different lifecycle than your app and may connect and disconnect at any time it is important that you attempt to reconnect to the Flipper server until it accepts your connection.</p>
<p>We use the RSocket protocol for communication between desktop and client, because it allows for easy certificate pinning and functionality like request-response messages.</p>
<p>In order to securely connect to Flipper, your client should first <a href="establishing-a-connection">obtain a certificate</a>.</p>
<p>After the client certificate has been obtained, connect to the following URL with an RSocket client:</p>
<pre><code class="hljs"><span class="hljs-symbol">localhost:</span><span class="hljs-number">8088</span>/sonar?os={OS}
                     <span class="hljs-variable">&amp;device</span>={DEVICE}
                     <span class="hljs-variable">&amp;device_id</span>={DEVICE_ID}
                     <span class="hljs-variable">&amp;app</span>={APP}
                     <span class="hljs-variable">&amp;sdk_version</span>={SDK_VERSION}
                     <span class="hljs-variable">&amp;foreground</span>={FOREGROUND}
</code></pre>
<p><strong>OS</strong>: The OS which the connecting is being established from. For example <code>os=Android</code> if your client is running on Android. This is usually hard-coded into the FlipperClient implementation. This string may be used by the Flipper desktop app to identify valid plugins as well as present in the UI to the user.</p>
<p><strong>DEVICE</strong>: The name of the device running the application. For example <code>device=iPhone7</code>.</p>
<p><strong>DEVICE_ID</strong>: A unique identifier for the device. The Flipper server / desktop app may use this to coalesce multiple connections originating from the save device or present the string in the UI to differentiate between connections to different clients.</p>
<p><strong>APP</strong>: The name of the app running this client instance. For example <code>app=Facebook</code> when connecting to a running facebook app. OS + DEVICE_ID + APP should together uniquely identify a connection.</p>
<p><strong>FOREGROUND</strong>: A boolean indicating whether this connection was established with a foreground process. This is a hint to the Flipper desktop app of whether to re-focus on this connection or not. For example <code>foreground=true</code>. This parameter is recommended but optional.</p>
<p><strong>SDK_VERSION</strong>: A number indicating the latest protocol version this client is compatible with. You can find the current version in our <a href="https://github.com/facebook/flipper/blob/master/xplat/Flipper/FlipperConnectionManagerImpl.cpp#L37">C++ connection implementation</a>. Usually stored as a constant in the client code, this allows protocol changes to be made whilst still preserving connectivity with old clients. When Flipper desktop encounters an old SDK version, it may attempt to communicate using a matching protocol. However, backwards compatibility is not guaranteed and you should strive to update clients on the rare occasion that the protocol version advances.</p>
<h2><a class="anchor" aria-hidden="true" id="responding-to-messages"></a><a href="#responding-to-messages" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Responding to messages</h2>
<p>Flipper uses a simple Remote Procedure Call protocol using JSON-formatted payloads.</p>
<p>The <code>method</code> field of the payload indicates which method of the FlipperClient is being called. This will always be present.</p>
<p>The <code>payload</code> field contains the JSON parameters for the method call. This may be omitted when no parameters are used.</p>
<p>It is recommended that implementations gracefully ignore extra fields for the sake of backwards and forwards compatibility.</p>
<p>Responses contain either a success object representing the return value of the RPC invocation or an error object indicating that an error occurred.</p>
<p><strong>The following methods must be implemented by all FlipperClient implementations</strong>:</p>
<p>The syntax used for these type definitions is <a href="https://flow.org/en/docs/types/objects/">Flow</a>. All requests/responses are JSON objects. Where no Response type is specified, it's a void call - no response is expected.</p>
<h3><a class="anchor" aria-hidden="true" id="getplugins"></a><a href="#getplugins" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>getPlugins</h3>
<p>Return the available plugins as a list of identifiers. A plugin identifier is a string which is matched with the plugin identifier of desktop javascript plugins. This allows the client to specify the plugins it supports.</p>
<pre><code class="hljs"><span class="hljs-built_in">Request</span> = {
  <span class="hljs-string">"method"</span>: <span class="hljs-string">"getPlugins"</span>,
}

<span class="hljs-built_in">Response</span> = {
  <span class="hljs-string">"success"</span>: {
    <span class="hljs-string">"plugins"</span>: <span class="hljs-built_in">Array</span>&lt;<span class="hljs-built_in">string</span>&gt;
  },
}
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="init"></a><a href="#init" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>init</h3>
<p>Initialize a plugin. This should result in an onConnected call on the appropriate plugin. Plugins should by nature be lazy and should not be initialized up front as this may incur significant cost. The Flipper desktop client knows when a plugin is needed and should control when to initialize them.</p>
<pre><code class="hljs">Request = {
  <span class="hljs-string">"method"</span>: <span class="hljs-string">"init"</span>,
  <span class="hljs-string">"params"</span>: {
    <span class="hljs-string">"plugin"</span>: <span class="hljs-built_in">string</span>,
  },
}
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="deinit"></a><a href="#deinit" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>deinit</h3>
<p>Opposite of init. A call to deinit is made when a plugin is no longer needed and should release any resources. Don't rely only on deinit to release plugin resources as Flipper may quit without having the chance to issue a deinit call. In those cases, you should also rely on the RSocket disconnect callbacks. This call is mainly for allowing the desktop app to control the lifecycle of plugins.</p>
<pre><code class="hljs">Request = {
  <span class="hljs-string">"method"</span>: <span class="hljs-string">"deinit"</span>,
  <span class="hljs-string">"params"</span>: {
    <span class="hljs-string">"plugin"</span>: <span class="hljs-built_in">string</span>,
  },
}
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="execute"></a><a href="#execute" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>execute</h3>
<p>This is the main call and how the Flipper desktop plugins and client plugins communicate. When a javascript desktop plugin issues a client request it will be wrapped in one of these execute calls. This execute indicates that the call should be redirected to a plugin.
request.params.api is the plugin id.
request.params.method is the method within the plugin to execute.
request.params.params is an optional params object containing the parameters to the RPC invocation.</p>
<pre><code class="hljs">Request = {
  <span class="hljs-string">"method"</span>: <span class="hljs-string">"execute"</span>,
  <span class="hljs-string">"params"</span>: {
    <span class="hljs-string">"api"</span>: <span class="hljs-built_in">string</span>,
    <span class="hljs-string">"method"</span>: <span class="hljs-built_in">string</span>,
    <span class="hljs-string">"params"</span>: ?<span class="hljs-built_in">Object</span>,
  },
}

Response = {
  <span class="hljs-string">"success"</span>: <span class="hljs-built_in">Object</span>,
} | {
  <span class="hljs-string">"error"</span>: <span class="hljs-built_in">Object</span>,
}
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="error-reporting"></a><a href="#error-reporting" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Error Reporting</h2>
<p>The Flipper desktop app handles error reporting so you don't have to. If an error occurs during the execution of an RPC invocation, return a serialization of it in the response so it can be attributed to the method call.</p>
<p>If an error occurs in some other context, you can proactively send it to Flipper with the following request structure:</p>
<pre><code class="hljs"><span class="hljs-attr">Request</span> = <span class="hljs-string">{</span>
  <span class="hljs-attr">error</span>: <span class="hljs-string">{</span>
    <span class="hljs-attr">message</span>: <span class="hljs-string">string,</span>
    <span class="hljs-attr">stacktrace</span>: <span class="hljs-string">string,</span>
  <span class="hljs-attr">}</span>
<span class="hljs-attr">}</span>
</code></pre>
<p>While in development mode, Flipper will display any client errors next to javascript errors in the Electron/Chrome DevTools console.</p>
<h2><a class="anchor" aria-hidden="true" id="testing"></a><a href="#testing" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Testing</h2>
<p>Testing is incredibly important when building core infrastructure and tools. The following is pseudo code for tests we would expect any new FlipperClient implementation to implement and correctly execute. To run tests we strongly encourage you to build a mock for the RSocket connection to mock out the desktop side of the protocol and to not have any network dependencies in your test code.</p>
<pre><code class="hljs">test(<span class="hljs-string">"GetPlugins"</span>, {
  let<span class="hljs-built_in"> connection </span>= new MockConnection();
  let<span class="hljs-built_in"> client </span>= new FlipperClient(connection);
  let plugin = {id: <span class="hljs-string">"test"</span>};

  client.addPlugin(plugin);
  client.start();

  connection.onReceive({
    id: 1,
    method: <span class="hljs-string">"getPlugins"</span>,
  });

  assert(connection.sentMessages, contains({
    id: 1,
    success:{
      plugins: [<span class="hljs-string">"test"</span>],
    },
  }));
});
</code></pre>
<pre><code class="hljs">test(<span class="hljs-string">"InitDeinit"</span>, {
  let<span class="hljs-built_in"> connection </span>= new MockConnection();
  let<span class="hljs-built_in"> client </span>= new FlipperClient(connection);
  let plugin = {id: <span class="hljs-string">"test"</span>, connected: <span class="hljs-literal">false</span>};

  client.addPlugin(plugin);
  client.start();

  assertFalse(plugin.connected);

  connection.onReceive({
    id: 1,
    method: <span class="hljs-string">"init"</span>,
    params: {
      plugin: <span class="hljs-string">"test"</span>,
    },
  });

  assertTrue(plugin.connected);

  connection.onReceive({
    id: 1,
    method: <span class="hljs-string">"deinit"</span>,
    params: {
      plugin: <span class="hljs-string">"test"</span>,
    },
  });

  assertFalse(plugin.connected);
});
</code></pre>
<pre><code class="hljs">test(<span class="hljs-string">"Disconnect"</span>, {
  let<span class="hljs-built_in"> connection </span>= new MockConnection();
  let<span class="hljs-built_in"> client </span>= new FlipperClient(connection);
  let plugin = {id: <span class="hljs-string">"test"</span>, connected: <span class="hljs-literal">false</span>};

  client.addPlugin(plugin);
  client.start();

  assertFalse(plugin.connected);

  connection.onReceive({
    id: 1,
    method: <span class="hljs-string">"init"</span>,
    params: {
      plugin: <span class="hljs-string">"test"</span>,
    },
  });

  assertTrue(plugin.connected);
  connection.disconnect();
  assertFalse(plugin.connected);
});
</code></pre>
<pre><code class="hljs">test(<span class="hljs-string">"Execute"</span>, {
  let<span class="hljs-built_in"> connection </span>= new MockConnection();
  let<span class="hljs-built_in"> client </span>= new FlipperClient(connection);
  let plugin = {
    id: <span class="hljs-string">"test"</span>,
    reverse: (params, responder) =&gt; {
      responder.success({word: params.word.reverse()});
    },
  };

  client.addPlugin(plugin);
  client.start();

  connection.onReceive({
    id: 1,
    method: <span class="hljs-string">"init"</span>,
    params: {
      plugin: <span class="hljs-string">"test"</span>,
    },
  });

  connection.onReceive({
    id: 1,
    method: <span class="hljs-string">"execute"</span>,
    params: {
      api: <span class="hljs-string">"test"</span>,
      method: <span class="hljs-string">"reverse"</span>,
      params: {
        word: <span class="hljs-string">"hello"</span>
      },
    },
  });

  assert(connection.sentMessages, contains({
    id: 1,
    success:{
      word: <span class="hljs-string">"olleh"</span>,
    },
  }));
});
</code></pre>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/extending/debugging.html"><span class="arrow-prev">← </span><span>Debugging</span></a><a class="docs-next button" href="/docs/extending/establishing-a-connection.html"><span>Secure Communication</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#establishing-a-connection">Establishing a connection</a></li><li><a href="#responding-to-messages">Responding to messages</a><ul class="toc-headings"><li><a href="#getplugins">getPlugins</a></li><li><a href="#init">init</a></li><li><a href="#deinit">deinit</a></li><li><a href="#execute">execute</a></li></ul></li><li><a href="#error-reporting">Error Reporting</a></li><li><a href="#testing">Testing</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/mascot.png" alt="Flipper mascot" title="I&#x27;m a dolphin not a whale!" width="66"/></a><div><h5>Docs</h5><a href="/docs/getting-started.html">Getting Started</a><a href="/docs/extending/js-setup.html">Creating Plugins</a></div><div><h5>Plugins</h5><a href="/docs/features/logs-plugin.html">Log Viewer</a><a href="/docs/features/layout-plugin.html">Layout Inspector</a><a href="/docs/features/network-plugin.html">Network Inspector</a></div><div><h5>More</h5><a href="https://twitter.com/flipper_fb">Twitter</a><a href="https://github.com/facebook/flipper">GitHub</a><a class="github-button" href="https://github.com/facebook/flipper" data-icon="octicon-star" data-count-href="/facebook/flipper/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><a href="https://code.facebook.com/projects/" target="_blank" class="fbOpenSource"><img src="/img/oss_logo.png" alt="Facebook Open Source" width="170" height="45"/></a><section class="copyright">Copyright © 2020 Facebook</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '2df980e7ffc95c19552790f7cad32666',
                indexName: 'fbflipper',
                inputSelector: '#search_input_react',
                algoliaOptions: {"hitsPerPage":5}
              });
            </script></body></html>